<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!-- Generated by coWiki 0.3.0-dev (http://www.develnet.org) -->

<html>
<head>
<title>Hibernate - Hibernate Log4j Appender</title>

<meta name="generator" content="coWiki 0.3.0-dev, http://www.develnet.org">
<meta name="robots" content="index, follow">
<meta name="keywords" content="log4j appender">
<meta name="mssmarttagspreventparsing" content="true">
<meta name="revisit-after" content="7 days">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-15">

<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">

<style type="text/css" media="screen">
<!--

  a {
    color: #256b87;
    text-decoration: none;
  }

  a:visited {
    color: #888888;
  }

a:hover {
    color: black;
}

  p, ol, ul, li, dl, dt, dd, blockquote {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    text-align: ;
    line-height: 130%;
    color: #000000;
  }

    UL, OL, LI {
        list-style: square;
        font-size: 100%;
        line-height: 120%;
    }

  td, th {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    color: #000000;
    font-weight: 500;
  }

  span {
    font-size: 12px;
    color: #000000;
    font-weight: 500;
  }

  blockquote {
    font-size: 100%;
    margin-right: 0px;
  }

  h1, h2, h3, h4, h5, h6  {
    color: #000000;
  }

  h1 { font-size: 150%; margin-top: 10px;}
  h2 { font-size: 130%; font-weight: bold; margin-top: 25px;}
  h3 { font-size: 110%; font-weight: bold; margin-top: 20px;}
  h4 { font-size: 105%; font-weight: bold;}
  h5 { font-size: 100%; font-style: italic; }
  h6 { font-size: 100%; font-style: italic; }

  pre, tt {
    font-size: 90%;
    font-family: monospace;
    color: #000000;
  }

  pre.code {
    font-size: 90%;
    font-family: monospace;
    padding: 5px;
    border-style: solid;
    border-width: 1px;
    border-color: #CCCCCC;
    background-color: #eeeeee;
  }

  hr  {
    width: 100%;
    height: 2px;
    background-color: #CCCCCC;
    border-width: 0px;
    padding: 0px;
    color: #CCCCCC;
  }

  input, textarea  {
    font-size: 90%;
    font-family: monospace;
    color: #000000;
    border-width: 1px;
  }

  input.submit {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    font-weight: bold;
    background-color: #a0a0a0;
    border-width: 1px;
    color: white;
  }

  textarea {
    padding-left: 2px;
  }

  select {
    font-family: monospace;
    font-size: 13.9px;
    color: #000000;
  }

  fieldset {
    margin: 0px;
    padding: 5px;
  }

  legend {
    font-size: 92%;
  }

  /* ------------------------------------------------------------------*/

  .area {
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    background-color: #FFFFFF;
  }

  .areaoverflow {
    overflow: auto;
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding: 3px;
    background-color: #FFFFFF;
  }

  .areainset {
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding: 3px;
  }

  .window {
    border-style: outset;
    border-width: 2px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .wintitle {
    font-family: Verdana, Sans-serif;
    background-color: #59666C;
    color: #FFFFFF;
    font-weight: bold;
    font-size: 13.4px;
  }

  .tuborgbox {
    border-style: solid;
    border-width: 0px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .tuborgboxsimple {
    border-style: solid;
    border-width: 1px;
    border-color: black;
  }

  .rappsbox {
  }

  .rappsboxsimple {
    border-style: solid;
    border-width: 0px;
    border-color: black;
  }

  .spacer {
    font-size: 2px;
  }

  .error {
    color: #880000;
  }

  .missing {
    font-size: 90%;
    color: #880000;
    text-decoration: none;
    background-color: #BCAE79;
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .monospace {
    font-family: monospace;
    font-size: 92%;
  }

  .diff {
    font-family: monospace;
    font-size: 92%;
  }

  .label { font-size: 10px; font-family: Verdana, Sans-Serif; font-weight: bold; color: #ffffff; }


  .label:visited {
    color: white;
  }

  .labeldisabled { text-decoration: none; font-size: 90%; font-weight: bold; color: #CCCCCC; }

  .textbut {
    background-color: #BCAE79;
    border-style: solid;
    border-width: 1px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding-top: 1px;
    padding-bottom: 2px;
  }

  .imgbut {
    border-style: solid;
    border-width: 1px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .breadcrumb {
    font-size:90%;
  }

  .breadcrumb:visited {
  }

  .menubottom {
  }

  .menubottom:visited {
    color: #256b87;
  }

  .tiny {
    font-family: Verdana, Sans-serif;
    font-size: 11px;
  }

  .small {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
  }

  .medium {
    font-family: Verdana, Sans-serif;
    font-size: 13px;
  }

  .big {
    font-family: Verdana, Sans-serif;
    font-size: 20px;
  }

-->
</style>

<script language="JavaScript" type="text/javascript">
<!--

  // Do not remove (or change) the JavaScript part, and wonder about errors.
  // First change your plugins and templates not to use these functions.
  // Never use JavaScript for essential functionalities! You may use it
  // for uncritical and superfluous gimmicks.

  window.onerror = null;
  var undefined;

  // ----------------------------------------------------------------------

  function getParentNodeByName(obj, tag) {
    if (!obj.parentNode) { return false; }

    if (obj.parentNode.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.parentNode;
    }

    return getParentNodeByName(obj.parentNode, tag);
  }

  // ----------------------------------------------------------------------

  function getPrevSiblingNodeByName(obj, tag) {
    if (!obj.previousSibling) { return false; }

    if (obj.previousSibling.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.previousSibling;
    }

    return getPrevSiblingNodeByName(obj.previousSibling, tag);
  }

  // ----------------------------------------------------------------------

  function getNextSiblingNodeByName(obj, tag) {
    if (!obj.nextSibling) { return false; }

    if (obj.nextSibling.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.nextSibling;
    }

    return getNextSiblingNodeByName(obj.nextSibling, tag);
  }

  // ----------------------------------------------------------------------

  function fireClickEvent(nodeId) {
    if (document.getElementById) {
      if (obj = document.getElementById(nodeId)) {
        obj.click();
      }
    }
  }

  // ----------------------------------------------------------------------

  function fireClickEventOnChild(obj, tag) {
    if (obj.hasChildNodes) {
      for (i=0; i<obj.childNodes.length; i++) {
        if (obj.childNodes[i].nodeName.toLowerCase() == tag.toLowerCase()) {

          if (obj.childNodes[i].click) {
            obj.childNodes[i].click();
            break;
          }

        }
      }
    }
  }

  // ----------------------------------------------------------------------

  function mover(obj, color) {
    if (color == undefined) {
      obj.style.backgroundColor = '#59666C';
    } else {
      obj.style.backgroundColor = color;
    }
  }

  // ----------------------------------------------------------------------

  function mout(obj, color) {
    if (color == undefined) {
      obj.style.backgroundColor = '#BCAE79';
    } else {
      obj.style.backgroundColor = color;
    }
  }

  // ----------------------------------------------------------------------

  function moverOnParentName(obj, tag, color) {
    newObj = getParentNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnParentName(obj, tag, color) {
    newObj = getParentNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moverOnPrevSiblingName(obj, tag, color) {
    newObj = getPrevSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnPrevSiblingName(obj, tag, color) {
    newObj = getPrevSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moverOnNextSiblingName(obj, tag, color) {
    newObj = getNextSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnNextSiblingName(obj, tag, color) {
    newObj = getNextSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

//-->
</script>


</head>




<body text="#000000"
      link="#256b87" alink="#256b87"
      vlink="#888888" bgcolor="#FFFFFF"
      leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" style="margin-right:3px"
>
<noindex>

<table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td rowspan="2"width="100%"><a href="index.html"><img
                src="tpl/hibernate2/img/hibernate_logo.gif" width="220" height="63"
                alt="HIBERNATE" border="0"></a></td>
        <td align="right">        
            <a href="http://www.jboss.org/"><IMG
            border="0" src="hib_images/jboss_logo_small_nb.gif" alt="JBoss.org"></a>
        </td>
    </tr>
    <tr>
        <td>
            <table cellpadding="1" cellspacing="0" border="0">
                <tr>
                <td align="right" valign="bottom">
                    
                </td>
                <td valign="bottom" style="font-size:70%; color:#aaaaaa;">&nbsp;|&nbsp;</td>
                <td valign="bottom"  style="font-size: 70%;">
                    <a href="http://forum.hibernate.org/profile.php?mode=register">Register</a>
                </td>
                <td valign="bottom" style="font-size:70%; color:#aaaaaa;">&nbsp;|&nbsp;</td>        
                <td align="right" valign="bottom" width="70">
                    
                </td>
                </tr>
            </table>
        
        </td>
    </tr>
</table>


<table width="100%" bgcolor="#BCAE79" cellspacing="0"
  cellpadding="0" border="0" class="tuborgbox">
  <tr>
    <td width="100%" class="label" height="20">&nbsp;</td>

      
      

      <td>&nbsp;&nbsp;&nbsp;</td>

      

  </tr>
</table>

<table cellpadding="0" cellspacing="0" border="0"><tr><td><img src="tpl/hibernate2/img/0.gif" width="1" height="4" alt="" border="0"></td></tr></table>

</noindex>
<table cellpadding="0" cellspacing="0" border="0">
<tr>
<td>
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="white"
            ><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>
</td>
</tr>
<tr>
    <td bgcolor="#cccccc" valign="top" align="left" class="rappsbox">
    
      <table width="165"  bgcolor="#a0a0a0" cellpadding="0"
cellspacing="0" border="0">
<tr>
    <td>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="1.html"
            class="label"><span class="label">News</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="4.html"
            class="label"><span class="label">About</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="21.html"
            class="label"><span class="label">Feature List</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="200.html"
            class="label"><span class="label">Road Map</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="5.html"
            class="label"><span class="label">Documentation</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="27.html"
            class="label"><span class="label">Related Projects</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="78.html"
            class="label"><span class="label">External Documentation</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="6.html"
            class="label"><span class="label">Download</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="20.html"
            class="label"><span class="label">Forum &amp; Mailinglists</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="148.html"
            class="label"><span class="label">Support &amp; Training</span></a>&nbsp;</td>
        </tr>
      </table>

    

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="white"
            ><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    <!-- JIRA fixed position -->
    <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
        <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
        <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="217.html"
            class="label"><span class="label">JIRA Issue Tracking</span></a></td>
        </tr>
    </table>

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="#FFFFFF"><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    <!-- WIKI  -->
    <table cellpadding="0" cellspacing="0" border="0" bgcolor="#BCAE79">
        <tr>
        <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
        <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#BCAE79')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="37.html"
            class="label" bgcolor="#BCAE79"><span class="label">Wiki Community Area</label></a></td>
        </tr>
    </table>

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="#FFFFFF"><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    </td>
</tr></table>

<br/>

<br/>
<div align="center">
<a href="175.html"><img
src="hib_images/hibernate_banner02g_125.gif" width="117" height="125"
alt="Hibernate Public Training Courses" border="0"/></a>
</div>

<br/>

<br/>
<div align="center">
<a href="http://www.manning.com/bauer"><img
src="hib_images/hia_banner01.gif" width="124" height="135"
alt="Get Hibernate in Action eBook!" border="0" /></a>
</div>

<br/>
<br/>
<div align="center">
<img src="hib_images/jw_finalist2003.png" border=0" alt="JavaWorld 2003 Finalist">
</div>

<br/>
<br/>
<div align="center">
<img src="hib_images/jolt_winner.png" border=0" alt="Jolt Award 2004 Winner">
</div>

          
    </td>
    <td valign="top" width="100%">
    
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
      <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td rowspan="2" width="100%" valign="top">

        <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr height="10">
            <td width="100%">
                <table cellpadding="0" cellspacing="0" border="0">
  <tr>
    <td>
      

        
        <a href="5.html" class="breadcrumb"><b>Documentation</b></a>&nbsp;<tt>&gt;</tt>

      

        
        <a href="36.html" class="breadcrumb"><b>Community Area</b></a>&nbsp;<tt>&gt;</tt>

      

      <span class="breadcrumb">Hibernate Log4j Appender</span>
    </td>
  </tr>
</table>

            </td>
            </tr>
            <tr>
            <td>
                <hr width="100%">
    
                
    
                
<a name="A1"></a><h1>Hibernate Log4j Appender</h1><p>(12/06/2003 - Updated for Hibernate 2)</p><p>This section provides code for a Hibernate appender for use with the <a target="_blank" href="http://jakarta.apache.org/log4j/index.html">log4j</a> logging framework.</p><p>The log4j framework already contains a JDBC appender (org.apache.log4j.jdbc.JDBCAppender), that can be used to insert log output into a database table.  If you are already using Hibernate, this has several drawbacks.</p><p>The first is that you need to configure a separate database connection, or extend the JDBCAppender class to obtain its connection from Hibernate.</p><p>The second is that the JDBC appender provides no natural primary key that you can easily use with Hibernate to retrieve the records for use within your application (for example, in a log viewer page).  If you are like me, you will have written some additional framework around Hibernate that probably assumes every record has a primary key.</p><p>The Hibernate log4j appender allows you to persist log4j logging events by exposing the details of these log events through the HibernateAppenderLoggingEvent interface.  To use the log appender, you must provide your own implementation of this interface.  The interface basically specifies getters and setters for the information available in a log4j logging event.  This has been specified as an interface rather than an abstract class so that your implementation is free to extend your own ancestor.</p><p>You must also provide a class that implements the HibernateSessionService which defines the following method:</p>
<pre class="code">
public Session openSession() throws HibernateException;
</pre><p>This will be how the appender obtains an open Hibernate session.  This allows you to perform any other actions that you require when opening the session, such as registering audit interceptors.</p><p>The basic configuration required in the log4j.properties file will be similar to the following:</p>
<pre class="code">
### direct messages to Hibernate
log4j.appender.hibernate=HibernateAppender
log4j.appender.hibernate.sessionServiceClass=HibernateHelper
log4j.appender.hibernate.loggingEventClass=LogEvent
</pre><p>You need to replace the HibernateHelper with your own class that implements the HibernateSessionService and the LogEvent with your own class that implements the HibernateAppenderLoggingEvent interface.</p><p>You can then map the loggingEventClass class in a Hibernate mapping file, as you would with your applications own persistent objects.  My mapping file is shown below, but you are free to persist as much or as little of the log event that you require:</p>
<pre class="code">
&lt;hibernate-mapping&gt;
  &lt;class name=&quot;LogEvent&quot; 
         table=&quot;LOGGER&quot; 
         proxy=&quot;LogEvent&quot;&gt;
    &lt;id name=&quot;id&quot; column=&quot;log_id&quot;&gt;
      &lt;generator class=&quot;hilo&quot;/&gt;
    &lt;/id&gt;
    &lt;list name=&quot;loggingEventThrowableWrapper&quot; table=&quot;LOGGER_THROWABLE&quot; lazy=&quot;true&quot;&gt;
      &lt;key column=&quot;log_id&quot;/&gt;
      &lt;index column=&quot;i&quot;/&gt;
      &lt;composite-element class=&quot;LogEventThrowable&quot;&gt;
          &lt;property name=&quot;message&quot; column=&quot;message&quot; length=&quot;255&quot; not-null=&quot;true&quot;/&gt;
      &lt;/composite-element&gt;
    &lt;/list&gt;
    &lt;property name=&quot;level&quot;
              column=&quot;level&quot;
              length=&quot;7&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;message&quot;
              column=&quot;message&quot;
              length=&quot;255&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;className&quot;
              column=&quot;class_name&quot;
              length=&quot;255&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;fileName&quot;
              column=&quot;file_name&quot;
              length=&quot;255&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;lineNumber&quot;
              column=&quot;line_number&quot;
              length=&quot;5&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;methodName&quot;
              column=&quot;method_name&quot;
              length=&quot;255&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;loggerName&quot;
              column=&quot;logger_name&quot;
              length=&quot;255&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;startDate&quot;
              column=&quot;start_date&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;logDate&quot;
              column=&quot;log_date&quot;
              not-null=&quot;true&quot;/&gt;
    &lt;property name=&quot;threadName&quot;
              column=&quot;thread_name&quot;
              length=&quot;255&quot;
              not-null=&quot;true&quot;/&gt;
  &lt;/class&gt;
&lt;/hibernate-mapping&gt;
</pre><p>You will notice from the above mapping file that if the log event includes a throwable exception, the call stack is available for you to persist.  The HibernateAppenderLoggingEvent interface provides the following method:</p>
<pre class="code">
public void addThrowableMessage(int position, String throwableMessage);
</pre><p>You can implement this in your implementing class whichever way you choose.  In the above mapping file, I have implemented the add using an ArrayList that contains LogEventThrowable objects:</p>
<pre class="code">
private List loggingEventThrowableWrapper = new ArrayList();
</pre>
<pre class="code">
public void addThrowableMessage(int position, String throwableMessage) {
    LogEventThrowable letw = new LogEventThrowable();
    letw.setPosition(new Integer(position));
    letw.setMessage(throwableMessage);
    loggingEventThrowableWrapper.add(letw);        
}
</pre><p>The code for the three classes required for the appender is provided below.  The main complexity in this code is dealing with the problem that Hibernate itself can generate log messages.  The code needs to prevent the recursive situation where logging an event sent to the Hibernate appender generates a log message which is set to be logged by the Hibernate appender (which generates a log message etc.)  I didn't want to just ignore any log events from Hibernate as there may be warnings and errors as a result of starting Hibernate, or any of the additional services that Hibernate uses such as JCS.  Naturally, if Hibernate fails to start in a usable state, the logger cannot use Hibernate to persist log events to the database.</p>
<hr/><p>HibernateAppenderSessionService class</p>
<pre class="code">
import net.sf.hibernate.HibernateException;
import net.sf.hibernate.Session;

/**
 * Interface for providing an open Hibernate session to the 
 * {@link HibernateAppender}.
 * 
 * @author David Howe
 * 
 * @version 1.1
 *
 */
public interface HibernateAppenderSessionService {
    /**
     * &lt;P&gt;Returns a reference to a Hibernate session instance.&lt;/P&gt;
     * 
     * &lt;P&gt;This interface gives applications the ability to open a session
     * using their existing infrastructure, which may include registering
     * audit interceptors if required.&lt;/P&gt;
     * 
     * @return An open Hibernate session
     * @throws HibernateException
     */
    public Session openSession() throws HibernateException;
}
</pre>
<hr/><p>HibernateAppenderLoggingEvent class</p>
<pre class="code">
import java.util.Date;

/**
 * Interface for logging events that are to be persisted using the 
 * {@link HibernateAppender}.
 * 
 * @author David Howe
 * 
 * @version 1.0
 *
 */
public interface HibernateAppenderLoggingEvent {
    /**
     * Returns the log message.
     * 
     * @return The log message
     */
    public String getMessage();
    /**
     * Returns the name of the class.
     * 
     * @return The class name
     */
    public String getClassName();
    /**
     * Returns the source file name of the class.
     * 
     * @return The source file name
     */
    public String getFileName();
    /**
     * Returns the line number in the class that initiated the log event.
     * 
     * @return The line number
     */
    public String getLineNumber();
    /**
     * Returns the date and time of the log event.
     * 
     * @return The date and time of the log event
     */
    public Date getLogDate();
    /**
     * Returns the name of the logger.
     * 
     * @return The name of the logger
     */
    public String getLoggerName();
    /**
     * Returns the name of the method in the class that initiated the log event.
     * 
     * @return The name of the method
     */
    public String getMethodName();
    /**
     * Returns the date and time that the application started.
     * 
     * @return The date and time that the application started
     */
    public Date getStartDate();
    /**
     * Returns the name of the thread.
     * 
     * @return The name of the thread
     */
    public String getThreadName();
    /**
     * Returns the logging level of this log event.
     * 
     * @return The log level of this logging event
     */
    public String getLevel();
    /**
     * Sets the log message.
     * 
     * @param The log message
     */
    public void setMessage(String message);
    /**
     * Sets the name of the class.
     * 
     * @param string
     */
    public void setClassName(String className);
    /**
     * Sets source file name for the class.
     * 
     * @param The file name
     */
    public void setFileName(String fileName);
    /**
     * Sets the line number in the class that initiated the log event.
     * @param The line number
     */
    public void setLineNumber(String lineNumber);
    /**
     * Sets the date and time of the log event.
     * 
     * @param The date and time of the log event
     */
    public void setLogDate(Date logDate);
    /**
     * Sets the logger name.
     * 
     * @param The logger name
     */
    public void setLoggerName(String loggerName);
    /**
     * Sets the name of the method that initiated the log event.
     * 
     * @param The method name
     */
    public void setMethodName(String methodName);
    /**
     * Sets the date and time that the application started.
     * 
     * @param The date and time that the application started
     */
    public void setStartDate(Date startDate);
    /**
     * Sets the name of the thread.
     * 
     * @param The thread name
     */
    public void setThreadName(String threadName);
    /**
     * Sets the log level.
     * 
     * @param The log level of this logging event
     */
    public void setLevel(String level);
    /**
     * Adds a throwable exception message to the log event.
     * 
     * @param The position in the call stack
     * @param The throwable message
     */
    public void addThrowableMessage(int position, String throwableMessage);
}
</pre>
<hr/><p>HibernateAppender class</p>
<pre class="code">
import java.util.Date;
import java.util.Iterator;
import java.util.Vector;

import org.apache.log4j.Appender;
import org.apache.log4j.AppenderSkeleton;
import org.apache.log4j.Level;
import org.apache.log4j.spi.ErrorCode;
import org.apache.log4j.spi.LoggingEvent;

import net.sf.hibernate.HibernateException;
import net.sf.hibernate.Session;

/**
 * Log4J appender that uses Hibernate to store log events in a database.
 * To use this appender, you must provide two properties in the Log4J 
 * properties file:
 * 
 * &lt;UL&gt;sessionServiceClass&lt;/UL&gt;
 * &lt;UL&gt;loggingEventClass&lt;/UL&gt;
 * 
 * &lt;P&gt;The sessionServiceClass must implement the 
 * {@link HibernateAppenderSessionService} interface which provides the appender
 * with an open Hibernate session.  Your implementation of this interface
 * can perform any additional activities such as registering audit 
 * interceptors if required.&lt;/P&gt;
 * 
 * &lt;P&gt;The loggingEventClass must implement the
 * {@link HibernateAppenderLoggingEvent} interface.  Using an interface for the
 * logging event leaves your implementation free to extend any
 * existing persistence ancestor that you may already be using.&lt;/P&gt;
 * 
 * &lt;P&gt;An example Log4J properties file to configure the HibernateAppender
 * would be:&lt;/P&gt;
 * 
 * &lt;code&gt;
 * ### direct messages to Hibernate&lt;BR/&gt;
 * log4j.appender.hibernate=HibernateAppender&lt;BR/&gt;
 * log4j.appender.hibernate.sessionServiceClass=HibernateHelper&lt;BR/&gt;
 * log4j.appender.hibernate.loggingEventClass=LogEvent&lt;BR/&gt;
 * &lt;/code&gt;
 *
 * &lt;P&gt;You can now write a Hibernate mapping file for the class specified as
 * the &lt;code&gt;loggingEventClass&lt;/code&gt; to persist whichever parts of the
 * logging event that you require.
 * &lt;/P&gt;
 * 
 * @author David Howe
 * 
 * @version 1.1
 *
 */
public class HibernateAppender extends AppenderSkeleton implements Appender {

    private String sessionServiceClass;
    private String loggingEventClass;
    private HibernateAppenderSessionService hibernateSessionServiceImplementation;
    private Class loggingEventWrapperImplementationClass;
    private static Vector buffer = new Vector();
    private static Boolean appending = Boolean.FALSE;

    /* (non-Javadoc)
     * @see org.apache.log4j.AppenderSkeleton#append(org.apache.log4j.spi.LoggingEvent)
     */
    protected void append(LoggingEvent loggingEvent) {

        /* Ensure exclusive access to the buffer in case another thread is
         * currently writing the buffer.
         */
        synchronized (buffer) {
            // Add the current event into the buffer
            buffer.add(loggingEvent);
            /* Ensure exclusive access to the appending flag to guarantee that
             * it doesn't change in between checking it's value and setting it
             */
            synchronized (appending) {
                if (!appending.booleanValue()) {
                    /* No other thread is appending to the log, so this 
                     * thread can perform the append
                     */
                    appending = Boolean.TRUE;
                } else {
                    /* Another thread is already appending to the log and it
                     * will take care of emptying the buffer
                     */
                    return;
                }
            }
        }

        try {
            Session session =
                hibernateSessionServiceImplementation.openSession();

            /* Ensure exclusive access to the buffer in case another thread is
             * currently adding to the buffer.
             */
            synchronized (buffer) {
                Iterator iter = buffer.iterator();
                LoggingEvent bufferLoggingEvent;
                HibernateAppenderLoggingEvent loggingEventWrapper;

                /* Get the current buffer length.  We only want to process
                 * events that are currently in the buffer.  If events get
                 * added to the buffer after this point, they must have
                 * been caused by this loop, as we have synchronized on the
                 * buffer, so no other thread could be adding an event.  Any
                 * events that get added to the buffer as a result of this
                 * loop will be discarded, as to attempt to process them will
                 * result in an infinite loop.
                 */

                int bufferLength = buffer.size();

                for (int i = 0; i &lt; bufferLength; i++) {
                    bufferLoggingEvent = (LoggingEvent) buffer.get(i);

                    try {
                        loggingEventWrapper =
                            (HibernateAppenderLoggingEvent) loggingEventWrapperImplementationClass
                                .newInstance();
                    } catch (IllegalAccessException iae) {
                        this.errorHandler.error(
                            &quot;Unable to instantiate class &quot;
                                + loggingEventWrapperImplementationClass
                                    .getName(),
                            iae,
                            ErrorCode.GENERIC_FAILURE);
                        return;
                    } catch (InstantiationException ie) {
                        this.errorHandler.error(
                            &quot;Unable to instantiate class &quot;
                                + loggingEventWrapperImplementationClass
                                    .getName(),
                            ie,
                            ErrorCode.GENERIC_FAILURE);
                        return;
                    }

                    loggingEventWrapper.setMessage(
                        bufferLoggingEvent.getRenderedMessage());
                    loggingEventWrapper.setClassName(
                        bufferLoggingEvent
                            .getLocationInformation()
                            .getClassName());
                    loggingEventWrapper.setFileName(
                        bufferLoggingEvent
                            .getLocationInformation()
                            .getFileName());
                    loggingEventWrapper.setLineNumber(
                        bufferLoggingEvent
                            .getLocationInformation()
                            .getLineNumber());
                    Date logDate = new Date();
                    logDate.setTime(bufferLoggingEvent.timeStamp);

                    loggingEventWrapper.setLogDate(logDate);

                    loggingEventWrapper.setLoggerName(
                        bufferLoggingEvent.getLoggerName());
                    loggingEventWrapper.setMethodName(
                        bufferLoggingEvent
                            .getLocationInformation()
                            .getMethodName());

                    Date startDate = new Date();
                    startDate.setTime(LoggingEvent.getStartTime());

                    loggingEventWrapper.setStartDate(startDate);
                    loggingEventWrapper.setThreadName(
                        bufferLoggingEvent.getThreadName());

                    if (bufferLoggingEvent.getThrowableStrRep() != null) {
                        for (int j = 0;
                            j &lt; bufferLoggingEvent.getThrowableStrRep().length;
                            j++) {
                            loggingEventWrapper.addThrowableMessage(
                                j,
                                bufferLoggingEvent.getThrowableStrRep()[j]);
                        }
                    }

                    if (bufferLoggingEvent.equals(Level.ALL)) {
                        loggingEventWrapper.setLevel(&quot;ALL&quot;);
                    } else if (
                        bufferLoggingEvent.getLevel().equals(Level.DEBUG)) {
                        loggingEventWrapper.setLevel(&quot;DEBUG&quot;);
                    } else if (
                        bufferLoggingEvent.getLevel().equals(Level.ERROR)) {
                        loggingEventWrapper.setLevel(&quot;ERROR&quot;);
                    } else if (
                        bufferLoggingEvent.getLevel().equals(Level.FATAL)) {
                        loggingEventWrapper.setLevel(&quot;FATAL&quot;);
                    } else if (
                        bufferLoggingEvent.getLevel().equals(Level.INFO)) {
                        loggingEventWrapper.setLevel(&quot;INFO&quot;);
                    } else if (
                        bufferLoggingEvent.getLevel().equals(Level.OFF)) {
                        loggingEventWrapper.setLevel(&quot;OFF&quot;);
                    } else if (
                        bufferLoggingEvent.getLevel().equals(Level.WARN)) {
                        loggingEventWrapper.setLevel(&quot;WARN&quot;);
                    } else {
                        loggingEventWrapper.setLevel(&quot;UNKNOWN&quot;);
                    }
                    session.save(loggingEventWrapper);
                }
                session.flush();
                session.close();
                buffer.clear();

                /* Ensure exclusive access to the appending flag - this really
                 * shouldn't be needed as the only other check on this flag is
                 * also synchronized on the buffer.  We don't want to do this
                 * in the finally block as between here and the finally block
                 * we will not be synchronized on the buffer and another 
                 * process could add an event to the buffer, but the appending
                 * flag will still be true, so that event would not get
                 * written until another log event triggers the buffer to
                 * be emptied.
                 */
                synchronized (appending) {
                    appending = Boolean.FALSE;
                }
            }
        } catch (HibernateException he) {
            this.errorHandler.error(
                &quot;HibernateException&quot;,
                he,
                ErrorCode.GENERIC_FAILURE);
            // Reset the appending flag
            appending = Boolean.FALSE;
            return;
        }
    }

    /* (non-Javadoc)
     * @see org.apache.log4j.Appender#close()
     */
    public void close() {
    }

    /* (non-Javadoc)
     * @see org.apache.log4j.Appender#requiresLayout()
     */
    public boolean requiresLayout() {
        return false;
    }

    /**
     * Returns the name of class implementing the
     * {@link HibernateAppenderSessionService} interface.
     * 
     * @return Fully qualified class name 
     */
    public String getSessionServiceClass() {
        return sessionServiceClass;
    }

    /**
     * Sets the name of the class implementing the
     * {@link HibernateAppenderSessionService} interface.
     * 
     * @param Fully qualified class name
     */
    public void setSessionServiceClass(String string) {
        this.sessionServiceClass = string;
        try {
            Class c = Class.forName(string);
            try {
                hibernateSessionServiceImplementation =
                    (HibernateAppenderSessionService) c.newInstance();
            } catch (InstantiationException ie) {
                this.errorHandler.error(
                    &quot;Unable to instantiate class &quot; + c.getName(),
                    ie,
                    ErrorCode.GENERIC_FAILURE);
            } catch (IllegalAccessException iae) {
                this.errorHandler.error(
                    &quot;Unable to instantiate class &quot; + c.getName(),
                    iae,
                    ErrorCode.GENERIC_FAILURE);
            }
        } catch (ClassNotFoundException cnfe) {
            this.errorHandler.error(
                &quot;Invalid HibernateAppenderSessionService class &quot; + string,
                cnfe,
                ErrorCode.GENERIC_FAILURE);
        }
    }

    /**
     * Returns the name of the class implementing the 
     * {@link HibernateAppenderLoggingEvent} interface.
     * 
     * @return Fully qualified class name 
     */
    public String getLoggingEventClass() {
        return loggingEventClass;
    }

    /**
     * Sets the name of class implementing the 
     * {@link HibernateAppenderLoggingEvent} interface.
     * 
     * @param Fully qualified class name 
     */
    public void setLoggingEventClass(String string) {
        loggingEventClass = string;
        try {
            loggingEventWrapperImplementationClass =
                Class.forName(loggingEventClass);
        } catch (ClassNotFoundException cnfe) {
            this.errorHandler.error(
                &quot;Invalid LoggingEvent class &quot; + string,
                cnfe,
                ErrorCode.GENERIC_FAILURE);
        }
    }
}
</pre>

    
                
            </td>
            </tr>
            <tr>
            <td>
                
            </td>
            </tr>
        </table>

        </td>
        <td rowspan="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      </tr>
      </table>
    
    </td>
</tr>
</table>


<hr>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left">
<A href="http://sourceforge.net/projects/hibernate"><IMG
border="0" src="tpl/hibernate2/img/0.gif" hspace="30" vspace="2"></A>
</td>
<td align="right" valign="middle">
<b><a href="http://www.develnet.org/">coWiki</a>&nbsp;</b>
</td>
</tr>
</table>
</body>
</html>

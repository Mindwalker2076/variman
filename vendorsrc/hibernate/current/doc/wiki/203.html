<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!-- Generated by coWiki 0.3.0-dev (http://www.develnet.org) -->

<html>
<head>
<title>Hibernate - UserType for persisting Typesafe Enumerations with a single class</title>

<meta name="generator" content="coWiki 0.3.0-dev, http://www.develnet.org">
<meta name="robots" content="index, follow">
<meta name="keywords" content="PersistentEnum UserType">
<meta name="mssmarttagspreventparsing" content="true">
<meta name="revisit-after" content="7 days">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-15">

<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">

<style type="text/css" media="screen">
<!--

  a {
    color: #256b87;
    text-decoration: none;
  }

  a:visited {
    color: #888888;
  }

a:hover {
    color: black;
}

  p, ol, ul, li, dl, dt, dd, blockquote {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    text-align: ;
    line-height: 130%;
    color: #000000;
  }

    UL, OL, LI {
        list-style: square;
        font-size: 100%;
        line-height: 120%;
    }

  td, th {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    color: #000000;
    font-weight: 500;
  }

  span {
    font-size: 12px;
    color: #000000;
    font-weight: 500;
  }

  blockquote {
    font-size: 100%;
    margin-right: 0px;
  }

  h1, h2, h3, h4, h5, h6  {
    color: #000000;
  }

  h1 { font-size: 150%; margin-top: 10px;}
  h2 { font-size: 130%; font-weight: bold; margin-top: 25px;}
  h3 { font-size: 110%; font-weight: bold; margin-top: 20px;}
  h4 { font-size: 105%; font-weight: bold;}
  h5 { font-size: 100%; font-style: italic; }
  h6 { font-size: 100%; font-style: italic; }

  pre, tt {
    font-size: 90%;
    font-family: monospace;
    color: #000000;
  }

  pre.code {
    font-size: 90%;
    font-family: monospace;
    padding: 5px;
    border-style: solid;
    border-width: 1px;
    border-color: #CCCCCC;
    background-color: #eeeeee;
  }

  hr  {
    width: 100%;
    height: 2px;
    background-color: #CCCCCC;
    border-width: 0px;
    padding: 0px;
    color: #CCCCCC;
  }

  input, textarea  {
    font-size: 90%;
    font-family: monospace;
    color: #000000;
    border-width: 1px;
  }

  input.submit {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    font-weight: bold;
    background-color: #a0a0a0;
    border-width: 1px;
    color: white;
  }

  textarea {
    padding-left: 2px;
  }

  select {
    font-family: monospace;
    font-size: 13.9px;
    color: #000000;
  }

  fieldset {
    margin: 0px;
    padding: 5px;
  }

  legend {
    font-size: 92%;
  }

  /* ------------------------------------------------------------------*/

  .area {
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    background-color: #FFFFFF;
  }

  .areaoverflow {
    overflow: auto;
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding: 3px;
    background-color: #FFFFFF;
  }

  .areainset {
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding: 3px;
  }

  .window {
    border-style: outset;
    border-width: 2px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .wintitle {
    font-family: Verdana, Sans-serif;
    background-color: #59666C;
    color: #FFFFFF;
    font-weight: bold;
    font-size: 13.4px;
  }

  .tuborgbox {
    border-style: solid;
    border-width: 0px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .tuborgboxsimple {
    border-style: solid;
    border-width: 1px;
    border-color: black;
  }

  .rappsbox {
  }

  .rappsboxsimple {
    border-style: solid;
    border-width: 0px;
    border-color: black;
  }

  .spacer {
    font-size: 2px;
  }

  .error {
    color: #880000;
  }

  .missing {
    font-size: 90%;
    color: #880000;
    text-decoration: none;
    background-color: #BCAE79;
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .monospace {
    font-family: monospace;
    font-size: 92%;
  }

  .diff {
    font-family: monospace;
    font-size: 92%;
  }

  .label { font-size: 10px; font-family: Verdana, Sans-Serif; font-weight: bold; color: #ffffff; }


  .label:visited {
    color: white;
  }

  .labeldisabled { text-decoration: none; font-size: 90%; font-weight: bold; color: #CCCCCC; }

  .textbut {
    background-color: #BCAE79;
    border-style: solid;
    border-width: 1px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding-top: 1px;
    padding-bottom: 2px;
  }

  .imgbut {
    border-style: solid;
    border-width: 1px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .breadcrumb {
    font-size:90%;
  }

  .breadcrumb:visited {
  }

  .menubottom {
  }

  .menubottom:visited {
    color: #256b87;
  }

  .tiny {
    font-family: Verdana, Sans-serif;
    font-size: 11px;
  }

  .small {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
  }

  .medium {
    font-family: Verdana, Sans-serif;
    font-size: 13px;
  }

  .big {
    font-family: Verdana, Sans-serif;
    font-size: 20px;
  }

-->
</style>

<script language="JavaScript" type="text/javascript">
<!--

  // Do not remove (or change) the JavaScript part, and wonder about errors.
  // First change your plugins and templates not to use these functions.
  // Never use JavaScript for essential functionalities! You may use it
  // for uncritical and superfluous gimmicks.

  window.onerror = null;
  var undefined;

  // ----------------------------------------------------------------------

  function getParentNodeByName(obj, tag) {
    if (!obj.parentNode) { return false; }

    if (obj.parentNode.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.parentNode;
    }

    return getParentNodeByName(obj.parentNode, tag);
  }

  // ----------------------------------------------------------------------

  function getPrevSiblingNodeByName(obj, tag) {
    if (!obj.previousSibling) { return false; }

    if (obj.previousSibling.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.previousSibling;
    }

    return getPrevSiblingNodeByName(obj.previousSibling, tag);
  }

  // ----------------------------------------------------------------------

  function getNextSiblingNodeByName(obj, tag) {
    if (!obj.nextSibling) { return false; }

    if (obj.nextSibling.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.nextSibling;
    }

    return getNextSiblingNodeByName(obj.nextSibling, tag);
  }

  // ----------------------------------------------------------------------

  function fireClickEvent(nodeId) {
    if (document.getElementById) {
      if (obj = document.getElementById(nodeId)) {
        obj.click();
      }
    }
  }

  // ----------------------------------------------------------------------

  function fireClickEventOnChild(obj, tag) {
    if (obj.hasChildNodes) {
      for (i=0; i<obj.childNodes.length; i++) {
        if (obj.childNodes[i].nodeName.toLowerCase() == tag.toLowerCase()) {

          if (obj.childNodes[i].click) {
            obj.childNodes[i].click();
            break;
          }

        }
      }
    }
  }

  // ----------------------------------------------------------------------

  function mover(obj, color) {
    if (color == undefined) {
      obj.style.backgroundColor = '#59666C';
    } else {
      obj.style.backgroundColor = color;
    }
  }

  // ----------------------------------------------------------------------

  function mout(obj, color) {
    if (color == undefined) {
      obj.style.backgroundColor = '#BCAE79';
    } else {
      obj.style.backgroundColor = color;
    }
  }

  // ----------------------------------------------------------------------

  function moverOnParentName(obj, tag, color) {
    newObj = getParentNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnParentName(obj, tag, color) {
    newObj = getParentNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moverOnPrevSiblingName(obj, tag, color) {
    newObj = getPrevSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnPrevSiblingName(obj, tag, color) {
    newObj = getPrevSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moverOnNextSiblingName(obj, tag, color) {
    newObj = getNextSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnNextSiblingName(obj, tag, color) {
    newObj = getNextSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

//-->
</script>


</head>




<body text="#000000"
      link="#256b87" alink="#256b87"
      vlink="#888888" bgcolor="#FFFFFF"
      leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" style="margin-right:3px"
>
<noindex>

<table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td rowspan="2"width="100%"><a href="index.html"><img
                src="tpl/hibernate2/img/hibernate_logo.gif" width="220" height="63"
                alt="HIBERNATE" border="0"></a></td>
        <td align="right">        
            <a href="http://www.jboss.org/"><IMG
            border="0" src="hib_images/jboss_logo_small_nb.gif" alt="JBoss.org"></a>
        </td>
    </tr>
    <tr>
        <td>
            <table cellpadding="1" cellspacing="0" border="0">
                <tr>
                <td align="right" valign="bottom">
                    
                </td>
                <td valign="bottom" style="font-size:70%; color:#aaaaaa;">&nbsp;|&nbsp;</td>
                <td valign="bottom"  style="font-size: 70%;">
                    <a href="http://forum.hibernate.org/profile.php?mode=register">Register</a>
                </td>
                <td valign="bottom" style="font-size:70%; color:#aaaaaa;">&nbsp;|&nbsp;</td>        
                <td align="right" valign="bottom" width="70">
                    
                </td>
                </tr>
            </table>
        
        </td>
    </tr>
</table>


<table width="100%" bgcolor="#BCAE79" cellspacing="0"
  cellpadding="0" border="0" class="tuborgbox">
  <tr>
    <td width="100%" class="label" height="20">&nbsp;</td>

      
      

      <td>&nbsp;&nbsp;&nbsp;</td>

      

  </tr>
</table>

<table cellpadding="0" cellspacing="0" border="0"><tr><td><img src="tpl/hibernate2/img/0.gif" width="1" height="4" alt="" border="0"></td></tr></table>

</noindex>
<table cellpadding="0" cellspacing="0" border="0">
<tr>
<td>
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="white"
            ><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>
</td>
</tr>
<tr>
    <td bgcolor="#cccccc" valign="top" align="left" class="rappsbox">
    
      <table width="165"  bgcolor="#a0a0a0" cellpadding="0"
cellspacing="0" border="0">
<tr>
    <td>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="1.html"
            class="label"><span class="label">News</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="4.html"
            class="label"><span class="label">About</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="21.html"
            class="label"><span class="label">Feature List</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="200.html"
            class="label"><span class="label">Road Map</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="5.html"
            class="label"><span class="label">Documentation</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="27.html"
            class="label"><span class="label">Related Projects</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="78.html"
            class="label"><span class="label">External Documentation</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="6.html"
            class="label"><span class="label">Download</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="20.html"
            class="label"><span class="label">Forum &amp; Mailinglists</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="148.html"
            class="label"><span class="label">Support &amp; Training</span></a>&nbsp;</td>
        </tr>
      </table>

    

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="white"
            ><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    <!-- JIRA fixed position -->
    <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
        <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
        <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="217.html"
            class="label"><span class="label">JIRA Issue Tracking</span></a></td>
        </tr>
    </table>

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="#FFFFFF"><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    <!-- WIKI  -->
    <table cellpadding="0" cellspacing="0" border="0" bgcolor="#BCAE79">
        <tr>
        <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
        <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#BCAE79')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="37.html"
            class="label" bgcolor="#BCAE79"><span class="label">Wiki Community Area</label></a></td>
        </tr>
    </table>

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="#FFFFFF"><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    </td>
</tr></table>

<br/>

<br/>
<div align="center">
<a href="175.html"><img
src="hib_images/hibernate_banner02g_125.gif" width="117" height="125"
alt="Hibernate Public Training Courses" border="0"/></a>
</div>

<br/>

<br/>
<div align="center">
<a href="http://www.manning.com/bauer"><img
src="hib_images/hia_banner01.gif" width="124" height="135"
alt="Get Hibernate in Action eBook!" border="0" /></a>
</div>

<br/>
<br/>
<div align="center">
<img src="hib_images/jw_finalist2003.png" border=0" alt="JavaWorld 2003 Finalist">
</div>

<br/>
<br/>
<div align="center">
<img src="hib_images/jolt_winner.png" border=0" alt="Jolt Award 2004 Winner">
</div>

          
    </td>
    <td valign="top" width="100%">
    
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
      <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td rowspan="2" width="100%" valign="top">

        <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr height="10">
            <td width="100%">
                <table cellpadding="0" cellspacing="0" border="0">
  <tr>
    <td>
      

        
        <a href="5.html" class="breadcrumb"><b>Documentation</b></a>&nbsp;<tt>&gt;</tt>

      

        
        <a href="36.html" class="breadcrumb"><b>Community Area</b></a>&nbsp;<tt>&gt;</tt>

      

      <span class="breadcrumb">UserType for persisting Typesafe Enumerations with a single class</span>
    </td>
  </tr>
</table>

            </td>
            </tr>
            <tr>
            <td>
                <hr width="100%">
    
                
    
                
<a name="A1"></a><h1>UserType for persisting Typesafe Enumerations with a single class</h1><p>The replacement solution for the now deprecated <tt>PersistentEnum</tt> given in <a href="172.html">UserType for persisting a Typesafe Enumeration with a VARCHAR column</a> required that every enum implementation had a companion <tt>UserType</tt> implementation. Properties of the enum type had to be typed with the <tt>UserType</tt> implementation. This was bad news for users of the hbm2java POJO generator since setters/getters of such properties required the <tt>UserType</tt> implementation.</p>
<hr/>
<a name="A2"></a><h2>Single class solution</h2><p>The solution presented here only requires one class per enum -- the enum itself. In adittion, the persisted representation of the enum can be either a char, an integer, a string, or the enum string name itself (more types can easily be added).</p><p>There is one difference between real typesafe enums and the persistent type safe enums presented here -- they all <strong>require a no-arg constructor</strong> implementation (preferrably no-op). This is so that Hibernate will be able to create an instance while restoring objects from the database (the enum will still <em>be resolved to an already created static enum instance</em> in the <tt>nullSafeGet</tt> method). This is analogous to the requirement for <tt>Serialzable</tt> classes to have a public/protected no-arg constructor.</p>
<hr/>
<a name="A3"></a><h2>How to use it?</h2><p>To create an enum persisted as char, simply provide an enum implementation that extend <tt>PersistentCharacterEnum</tt>.</p>
<pre class="code">
package com.foo;

public final class Gender extends PersistentCharacterEnum {
    public static final Gender MALE = new Gender(&quot;male&quot;, 'M');
    public static final Gender FEMALE = new Gender(&quot;female&quot;, 'F');
    public static final Gender UNDETERMINED = new Gender(&quot;undetermined&quot;, 'U');

    public Gender() {}

    private Gender(String name, char persistentValue) {
        super(name, persistentValue);
    }
}
</pre><p>Now this enumeration can be used on properties in your mapping file as:</p>
<pre class="code">
&lt;property name=&quot;gender&quot; type=&quot;com.foo.Gender&quot;&gt;
</pre>
<hr/>
<a name="A4"></a><h2>Base class implementation</h2><p>All that is required to use this enum scheme is to import the following four classes into your project.</p><p>Enjoy!</p>
<ul><li>Base class for enums persisted as characters:</li></ul>
<pre class="code">
package com.foo;

import net.sf.hibernate.Hibernate;
import net.sf.hibernate.type.NullableType;

/**
 * Provides a base class for persistable, type-safe, comparable,
 * and serializable enums persisted as characters.
 *
 * &lt;p&gt;Create a subclass of this class implementing the enumeration:
 * &lt;pre&gt;package com.foo;
 *
 * public final class Gender extends PersistentCharacterEnum {
 *  public static final Gender MALE = new Gender(&quot;male&quot;, 'M');
 *  public static final Gender FEMALE = new Gender(&quot;female&quot;, 'F');
 *  public static final Gender UNDETERMINED = new Gender(&quot;undetermined&quot;, 'U');
 *
 *  public Gender() {}
 *
 *  private Gender(String name, char persistentValue) {
 *   super(name, persistentValue);
 *  }
 * }
 * &lt;/pre&gt;
 * Note that a no-op default constructor must be provided.&lt;/p&gt;
 *
 * &lt;p&gt;Use this enumeration in your mapping file as:
 * &lt;pre&gt;&amp;lt;property name=&quot;gender&quot; type=&quot;com.foo.Gender&quot;&amp;gt;&lt;/pre&gt;&lt;/p&gt;
 *
 * &lt;p&gt;&lt;code&gt;
 * $Id: PersistentCharacterEnum.java,v 1.1 2004/05/31 06:52:28 austvold Exp $
 * &lt;/pre&gt;&lt;/p&gt;
 *
 * @version $Revision: 1.1 $
 * @author &amp;Oslash;rjan Nygaard Austvold
 */
public abstract class PersistentCharacterEnum extends PersistentEnum {
    /**
     * Default constructor.  Hibernate need the default constructor
     * to retrieve an instance of the enum from a JDBC resultset.
     * The instance will be converted to the correct enum instance
     * in {@link #nullSafeGet(java.sql.ResultSet, java.lang.String[], java.lang.Object)}.
     */
    protected PersistentCharacterEnum() {
        // no-op -- instance will be tossed away once the equivalent enum is found.
    }


    /**
     * Constructs an enum with the given name and persistent representation.
     *
     * @param name name of enum.
     * @param persistentCharacter persistent representation of the enum.
     */
    protected PersistentCharacterEnum(String name, char persistentCharacter) {
        super(name, new Character(persistentCharacter));
    }


    /**
     * @see java.lang.Comparable#compareTo(java.lang.Object)
     */
    public int compareTo(Object other) {
        if (other == this) {
            return 0;
        }
        return ((Character) getEnumCode()).compareTo(((PersistentEnum) other).getEnumCode());
    }


    /**
     * @see PersistentEnum#getNullableType()
     */
    protected NullableType getNullableType() {
        return Hibernate.CHARACTER;
    }
}
</pre>
<ul><li>Base class for enums persisted as integers:</li></ul>
<pre class="code">
package com.foo;

import net.sf.hibernate.Hibernate;
import net.sf.hibernate.type.NullableType;


/**
 * Provides a base class for persistable, type-safe, comparable,
 * and serializable enums persisted as integers.
 *
 * &lt;p&gt;Create a subclass of this class implementing the enumeration:
 * &lt;pre&gt;package com.foo;
 *
 * public final class Gender extends PersistentCharacterEnum {
 *  public static final Gender MALE = new Gender(&quot;male&quot;, 0);
 *  public static final Gender FEMALE = new Gender(&quot;female&quot;, 1);
 *  public static final Gender UNDETERMINED = new Gender(&quot;undetermined&quot;, 2);
 *
 *  public Gender() {}
 *
 *  private Gender(String name, int persistentValue) {
 *   super(name, persistentValue);
 *  }
 * }
 * &lt;/pre&gt;
 * Note that a no-op default constructor must be provided.&lt;/p&gt;
 *
 * &lt;p&gt;Use this enumeration in your mapping file as:
 * &lt;pre&gt;&amp;lt;property name=&quot;gender&quot; type=&quot;com.foo.Gender&quot;&amp;gt;&lt;/pre&gt;&lt;/p&gt;
 *
 * &lt;p&gt;&lt;code&gt;
 * $Id: PersistentIntegerEnum.java,v 1.1 2004/05/31 06:52:28 austvold Exp $
 * &lt;/pre&gt;&lt;/p&gt;
 *
 * @version $Revision: 1.1 $
 * @author &amp;Oslash;rjan Nygaard Austvold
 */
public abstract class PersistentIntegerEnum extends PersistentEnum {
    /**
     * Default constructor.  Hibernate need the default constructor
     * to retrieve an instance of the enum from a JDBC resultset.
     * The instance will be converted to the correct enum instance
     * in {@link #nullSafeGet(java.sql.ResultSet, java.lang.String[], java.lang.Object)}.
     */
    protected PersistentIntegerEnum() {
        // no-op -- instance will be tossed away once the equivalent enum is found.
    }


    /**
     * Constructs an enum with the given name and persistent representation.
     *
     * @param name name of enum.
     * @param persistentInteger persistent representation of the enum.
     */
    protected PersistentIntegerEnum(String name, int persistentInteger) {
        super(name, new Integer(persistentInteger));
    }


    /**
     * @see java.lang.Comparable#compareTo(java.lang.Object)
     */
    public int compareTo(Object other) {
        if (other == this) {
            return 0;
        }
        return ((Integer) getEnumCode()).compareTo(((PersistentEnum) other).getEnumCode());
    }


    /**
     * @see PersistentEnum#getNullableType()
     */
    protected NullableType getNullableType() {
        return Hibernate.INTEGER;
    }
}
</pre>
<ul><li>Base class for enums persisted as strings:</li></ul>
<pre class="code">
package com.foo;

import net.sf.hibernate.Hibernate;
import net.sf.hibernate.type.NullableType;


/**
 * Provides a base class for persistable, type-safe, comparable,
 * and serializable enums persisted as strings.
 *
 * &lt;p&gt;Create a subclass of this class implementing the enumeration:
 * &lt;pre&gt;package com.foo;
 *
 * public final class Gender extends PersistentCharacterEnum {
 *  public static final Gender MALE = new Gender(&quot;male&quot;);
 *  public static final Gender FEMALE = new Gender(&quot;female&quot;);
 *  public static final Gender UNDETERMINED = new Gender(&quot;undetermined&quot;);
 *
 *  public Gender() {}
 *
 *  private Gender(String name) {
 *   super(name);
 *  }
 * }
 * &lt;/pre&gt;
 * Note that a no-op default constructor must be provided.&lt;/p&gt;
 *
 * &lt;p&gt;Use this enumeration in your mapping file as:
 * &lt;pre&gt;&amp;lt;property name=&quot;gender&quot; type=&quot;com.foo.Gender&quot;&amp;gt;&lt;/pre&gt;&lt;/p&gt;
 *
 * &lt;p&gt;&lt;code&gt;
 * $Id: PersistentStringEnum.java,v 1.1 2004/05/31 06:52:28 austvold Exp $
 * &lt;/pre&gt;&lt;/p&gt;
 *
 * @version $Revision: 1.1 $
 * @author &amp;Oslash;rjan Nygaard Austvold
 */
public abstract class PersistentStringEnum extends PersistentEnum {
    /**
     * Default constructor.  Hibernate need the default constructor
     * to retrieve an instance of the enum from a JDBC resultset.
     * The instance will be resolved to the correct enum instance
     * in {@link #nullSafeGet(java.sql.ResultSet, java.lang.String[], java.lang.Object)}.
     */
    protected PersistentStringEnum() {
        // no-op -- instance will be tossed away once the equivalent enum is found.
    }


    /**
     * Constructs an enum with name as the persistent representation.
     *
     * @param name name of the enum.
     */
    protected PersistentStringEnum(String name) {
        super(name, name);
    }


    /**
     * Constructs an enum with the given name and persistent representation.
     *
     * @param name name of enum.
     * @param persistentString persistent representation of the enum.
     */
    protected PersistentStringEnum(String name, String persistentString) {
        super(name, persistentString);
    }


    /**
     * @see java.lang.Comparable#compareTo(java.lang.Object)
     */
    public int compareTo(Object other) {
        if (other == this) {
            return 0;
        }
        return ((String) getEnumCode()).compareTo(((PersistentEnum) other).getEnumCode());
    }


    /**
     * @see PersistentEnum#getNullableType()
     */
    protected NullableType getNullableType() {
        return Hibernate.STRING;
    }
}
</pre>
<ul><li>Base class for all of the above enum base class implementations:</li></ul>
<pre class="code">
package com.foo;

import net.sf.hibernate.HibernateException;
import net.sf.hibernate.UserType;
import net.sf.hibernate.type.NullableType;

import java.io.Serializable;
import java.lang.reflect.Method;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;


/**
 * Provides a base class for implementations of persistable, type-safe,
 * comparable and serializable enums with a custom persisted representation.
 *
 * &lt;p&gt;The subclass must provide a compareTo(Object) and getNullableType()
 * implementation.&lt;/p&gt;
 *
 * &lt;p&gt;&lt;code&gt;
 * $Id: PersistentEnum.java,v 1.1 2004/05/31 06:52:28 austvold Exp $
 * &lt;/pre&gt;&lt;/p&gt;
 *
 * @version $Revision: 1.1 $
 * @author &amp;Oslash;rjan Nygaard Austvold
 */
abstract class PersistentEnum implements Comparable, Serializable, UserType {
    /**
     * &lt;code&gt;Map&lt;/code&gt; where key is of class name, value is of &lt;code&gt;Map&lt;/code&gt;.
     * where key is of enumCode and value is of enum instance.
     */
    private static final Map enumClasses = new HashMap();
    /**
     * The identifying enum code.
     */
    protected Serializable enumCode;
    /**
     * The name of the enumeration. Used as toString result.
     */
    protected String name;
    /**
     * The hashcode representation of the enum.
     */
    protected transient int hashCode;


    /**
     * Default constructor.  Hibernate need the default constructor
     * to retrieve an instance of the enum from a JDBC resultset.
     * The instance will be converted to the correct enum instance
     * in {@link #nullSafeGet(java.sql.ResultSet, java.lang.String[], java.lang.Object)}.
     */
    protected PersistentEnum() {
        // no-op -- instance will be tossed away once the equivalent enum is found.
    }


    /**
     * Constructs a new enumeration instance with the given name and persisted
     * representation of enumCode.
     *
     * @param name name of the enum instance.
     * @param enumCode persisted enum representation.
     */
    protected PersistentEnum(String name, Serializable enumCode) {
        this.name = name;
        this.enumCode = enumCode;
        hashCode = 7 + returnedClass().hashCode() + 3 * enumCode.hashCode();

        Class enumClass = returnedClass();
        Map entries = (Map) enumClasses.get(enumClass);
        if (entries == null) {
            entries = new HashMap();
            enumClasses.put(enumClass, entries);
        }
        if (entries.containsKey(enumCode)) {
            throw new IllegalArgumentException(&quot;The enum code must be unique, '&quot;
                    + enumCode + &quot;' has already been added&quot;);
        }
        entries.put(enumCode, this);
    }


    /**
     * @see java.lang.Object#hashCode()
     */
    public final int hashCode() {
        return hashCode;
    }


    /**
     * @see java.lang.Object#equals(java.lang.Object)
     */
    public final boolean equals(Object other) {
        if (other == this) {
            return true;

        } else if (other == null) {
            return false;

        } else if (((PersistentEnum) other).returnedClass().getName().equals(returnedClass().getName())) {
            // different classloaders
            try {
                // try to avoid reflection
                return enumCode.equals(((PersistentEnum) other).enumCode);

            } catch (ClassCastException ex) {
                // use reflection
                try {
                    Method mth = other.getClass().getMethod(&quot;getEnumCode&quot;, null);
                    Serializable enumCode = (Serializable) mth.invoke(other, null);
                    return this.enumCode.equals(enumCode);
                } catch (Exception ignore) { // NoSuchMethod-, IllegalAccess-, InvocationTargetException
                }
                return false;
            }
        } else {
            return false;
        }
    }


    /**
     * Gets the persistable enum code of this enum.
     *
     * @return the enum code.
     */
    public final Serializable getEnumCode() {
        return enumCode;
    }


    /**
     * Resolves this enumeration into a already staticly instantiated enum.
     *
     * @return the type-safe enum equivalent to this enumeration.
     */
    protected Object readResolve() {
        Map entries = (Map) enumClasses.get(returnedClass());
        return (entries != null) ? entries.get(enumCode) : null;
    }


    /**
     * Gets the collection of enumeration instances of a given
     * enumeration class.
     *
     * @param enumClass enumeration class type.
     * @return collection of enumerations of the given class.
     */
    protected static Collection getEnumCollection(Class enumClass) {
        Map entries = (Map) enumClasses.get(enumClass);
        return (entries != null)
                ? Collections.unmodifiableCollection(entries.values())
                : Collections.EMPTY_LIST;
    }


    /**
     * @see Comparable#compareTo(Object)
     */
    public abstract int compareTo(Object other);


    /**
     * Gets the Hibernate type of the persisted representation of the enum.
     *
     * @return the Nullable Hibernate type.
     */
    protected abstract NullableType getNullableType();


    /**
     *  @see net.sf.hibernate.UserType#sqlTypes()
     */
    public int[] sqlTypes() {
        return new int[]{getNullableType().sqlType()};
    }


    /**
     * Simply return the enums name.
     *
     * @return the string representation of this enum.
     */
    public String toString() {
        return name;
    }


    /**
     *  @see net.sf.hibernate.UserType#deepCopy(java.lang.Object)
     */
    public Object deepCopy(Object value) throws HibernateException {
        // Enums are immutable - nothing to be done to deeply clone it
        return value;
    }


    /**
     *  @see net.sf.hibernate.UserType#isMutable()
     */
    public boolean isMutable() {
        // Enums are immutable
        return false;
    }


    /**
     * @see net.sf.hibernate.UserType#returnedClass()
     * @return
     */
    public Class returnedClass() {
        return this.getClass();
    }


    /**
     *  @see net.sf.hibernate.UserType#equals(java.lang.Object, java.lang.Object)
     */
    public boolean equals(Object x, Object y) throws HibernateException {
        if (x == y) {
            return true;
        } else if (x == null || y == null) {
            return false;
        } else {
            return getNullableType().equals(x, y);
        }
    }


    /**
     *  @see net.sf.hibernate.UserType#nullSafeGet(java.sql.ResultSet, java.lang.String[], java.lang.Object)
     */
    public Object nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {
        Serializable enumCode = (Serializable) getNullableType().nullSafeGet(rs, names[0]);
        Map entries = (Map) enumClasses.get(returnedClass());
        return (PersistentEnum) ((entries != null)
                ? entries.get(enumCode)
                : null);
    }


    /**
     * @see net.sf.hibernate.UserType#nullSafeSet(java.sql.PreparedStatement, java.lang.Object, int)
     */
    public void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException, SQLException {
        // make sure the received value is of the right type
        if ((value != null) &amp;&amp; !returnedClass().isAssignableFrom(value.getClass())) {
            throw new IllegalArgumentException(&quot;Received value is not a [&quot; +
                    returnedClass().getName() + &quot;] but [&quot; + value.getClass() + &quot;]&quot;);
        }

        // convert the enum into its persistence format
        Serializable enumCode = ((PersistentEnum) value).getEnumCode();

        // set the value into the resultset
        st.setObject(index, enumCode, getNullableType().sqlType());
    }
}
</pre>

    
                
            </td>
            </tr>
            <tr>
            <td>
                
            </td>
            </tr>
        </table>

        </td>
        <td rowspan="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      </tr>
      </table>
    
    </td>
</tr>
</table>


<hr>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left">
<A href="http://sourceforge.net/projects/hibernate"><IMG
border="0" src="tpl/hibernate2/img/0.gif" hspace="30" vspace="2"></A>
</td>
<td align="right" valign="middle">
<b><a href="http://www.develnet.org/">coWiki</a>&nbsp;</b>
</td>
</tr>
</table>
</body>
</html>

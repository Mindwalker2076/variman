<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!-- Generated by coWiki 0.3.0-dev (http://www.develnet.org) -->

<html>
<head>
<title>Hibernate - Data Access with the Spring Framework</title>

<meta name="generator" content="coWiki 0.3.0-dev, http://www.develnet.org">
<meta name="robots" content="index, follow">
<meta name="keywords" content="Spring Framework bean">
<meta name="mssmarttagspreventparsing" content="true">
<meta name="revisit-after" content="7 days">
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-15">

<link rel="icon" href="favicon.ico" type="image/ico">
<link rel="shortcut icon" href="favicon.ico">

<style type="text/css" media="screen">
<!--

  a {
    color: #256b87;
    text-decoration: none;
  }

  a:visited {
    color: #888888;
  }

a:hover {
    color: black;
}

  p, ol, ul, li, dl, dt, dd, blockquote {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    text-align: ;
    line-height: 130%;
    color: #000000;
  }

    UL, OL, LI {
        list-style: square;
        font-size: 100%;
        line-height: 120%;
    }

  td, th {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    color: #000000;
    font-weight: 500;
  }

  span {
    font-size: 12px;
    color: #000000;
    font-weight: 500;
  }

  blockquote {
    font-size: 100%;
    margin-right: 0px;
  }

  h1, h2, h3, h4, h5, h6  {
    color: #000000;
  }

  h1 { font-size: 150%; margin-top: 10px;}
  h2 { font-size: 130%; font-weight: bold; margin-top: 25px;}
  h3 { font-size: 110%; font-weight: bold; margin-top: 20px;}
  h4 { font-size: 105%; font-weight: bold;}
  h5 { font-size: 100%; font-style: italic; }
  h6 { font-size: 100%; font-style: italic; }

  pre, tt {
    font-size: 90%;
    font-family: monospace;
    color: #000000;
  }

  pre.code {
    font-size: 90%;
    font-family: monospace;
    padding: 5px;
    border-style: solid;
    border-width: 1px;
    border-color: #CCCCCC;
    background-color: #eeeeee;
  }

  hr  {
    width: 100%;
    height: 2px;
    background-color: #CCCCCC;
    border-width: 0px;
    padding: 0px;
    color: #CCCCCC;
  }

  input, textarea  {
    font-size: 90%;
    font-family: monospace;
    color: #000000;
    border-width: 1px;
  }

  input.submit {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
    font-weight: bold;
    background-color: #a0a0a0;
    border-width: 1px;
    color: white;
  }

  textarea {
    padding-left: 2px;
  }

  select {
    font-family: monospace;
    font-size: 13.9px;
    color: #000000;
  }

  fieldset {
    margin: 0px;
    padding: 5px;
  }

  legend {
    font-size: 92%;
  }

  /* ------------------------------------------------------------------*/

  .area {
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    background-color: #FFFFFF;
  }

  .areaoverflow {
    overflow: auto;
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding: 3px;
    background-color: #FFFFFF;
  }

  .areainset {
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding: 3px;
  }

  .window {
    border-style: outset;
    border-width: 2px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .wintitle {
    font-family: Verdana, Sans-serif;
    background-color: #59666C;
    color: #FFFFFF;
    font-weight: bold;
    font-size: 13.4px;
  }

  .tuborgbox {
    border-style: solid;
    border-width: 0px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .tuborgboxsimple {
    border-style: solid;
    border-width: 1px;
    border-color: black;
  }

  .rappsbox {
  }

  .rappsboxsimple {
    border-style: solid;
    border-width: 0px;
    border-color: black;
  }

  .spacer {
    font-size: 2px;
  }

  .error {
    color: #880000;
  }

  .missing {
    font-size: 90%;
    color: #880000;
    text-decoration: none;
    background-color: #BCAE79;
    border-style: solid;
    border-width: 1px;
    border-left-color: #ffffff;
    border-top-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .monospace {
    font-family: monospace;
    font-size: 92%;
  }

  .diff {
    font-family: monospace;
    font-size: 92%;
  }

  .label { font-size: 10px; font-family: Verdana, Sans-Serif; font-weight: bold; color: #ffffff; }


  .label:visited {
    color: white;
  }

  .labeldisabled { text-decoration: none; font-size: 90%; font-weight: bold; color: #CCCCCC; }

  .textbut {
    background-color: #BCAE79;
    border-style: solid;
    border-width: 1px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
    padding-top: 1px;
    padding-bottom: 2px;
  }

  .imgbut {
    border-style: solid;
    border-width: 1px;
    border-top-color: #ffffff;
    border-left-color: #ffffff;
    border-right-color: #ffffff;
    border-bottom-color: #ffffff;
  }

  .breadcrumb {
    font-size:90%;
  }

  .breadcrumb:visited {
  }

  .menubottom {
  }

  .menubottom:visited {
    color: #256b87;
  }

  .tiny {
    font-family: Verdana, Sans-serif;
    font-size: 11px;
  }

  .small {
    font-family: Verdana, Sans-serif;
    font-size: 12px;
  }

  .medium {
    font-family: Verdana, Sans-serif;
    font-size: 13px;
  }

  .big {
    font-family: Verdana, Sans-serif;
    font-size: 20px;
  }

-->
</style>

<script language="JavaScript" type="text/javascript">
<!--

  // Do not remove (or change) the JavaScript part, and wonder about errors.
  // First change your plugins and templates not to use these functions.
  // Never use JavaScript for essential functionalities! You may use it
  // for uncritical and superfluous gimmicks.

  window.onerror = null;
  var undefined;

  // ----------------------------------------------------------------------

  function getParentNodeByName(obj, tag) {
    if (!obj.parentNode) { return false; }

    if (obj.parentNode.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.parentNode;
    }

    return getParentNodeByName(obj.parentNode, tag);
  }

  // ----------------------------------------------------------------------

  function getPrevSiblingNodeByName(obj, tag) {
    if (!obj.previousSibling) { return false; }

    if (obj.previousSibling.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.previousSibling;
    }

    return getPrevSiblingNodeByName(obj.previousSibling, tag);
  }

  // ----------------------------------------------------------------------

  function getNextSiblingNodeByName(obj, tag) {
    if (!obj.nextSibling) { return false; }

    if (obj.nextSibling.nodeName.toLowerCase() == tag.toLowerCase()) {
      return obj.nextSibling;
    }

    return getNextSiblingNodeByName(obj.nextSibling, tag);
  }

  // ----------------------------------------------------------------------

  function fireClickEvent(nodeId) {
    if (document.getElementById) {
      if (obj = document.getElementById(nodeId)) {
        obj.click();
      }
    }
  }

  // ----------------------------------------------------------------------

  function fireClickEventOnChild(obj, tag) {
    if (obj.hasChildNodes) {
      for (i=0; i<obj.childNodes.length; i++) {
        if (obj.childNodes[i].nodeName.toLowerCase() == tag.toLowerCase()) {

          if (obj.childNodes[i].click) {
            obj.childNodes[i].click();
            break;
          }

        }
      }
    }
  }

  // ----------------------------------------------------------------------

  function mover(obj, color) {
    if (color == undefined) {
      obj.style.backgroundColor = '#59666C';
    } else {
      obj.style.backgroundColor = color;
    }
  }

  // ----------------------------------------------------------------------

  function mout(obj, color) {
    if (color == undefined) {
      obj.style.backgroundColor = '#BCAE79';
    } else {
      obj.style.backgroundColor = color;
    }
  }

  // ----------------------------------------------------------------------

  function moverOnParentName(obj, tag, color) {
    newObj = getParentNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnParentName(obj, tag, color) {
    newObj = getParentNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moverOnPrevSiblingName(obj, tag, color) {
    newObj = getPrevSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnPrevSiblingName(obj, tag, color) {
    newObj = getPrevSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moverOnNextSiblingName(obj, tag, color) {
    newObj = getNextSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mover(newObj);
    } else {
      mover(newObj, color);
    }
  }

  // ----------------------------------------------------------------------

  function moutOnNextSiblingName(obj, tag, color) {
    newObj = getNextSiblingNodeByName(obj, tag);
    if (!newObj) { return; }

    if (color == undefined) {
      mout(newObj);
    } else {
      mout(newObj, color);
    }
  }

//-->
</script>


</head>




<body text="#000000"
      link="#256b87" alink="#256b87"
      vlink="#888888" bgcolor="#FFFFFF"
      leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" style="margin-right:3px"
>
<noindex>

<table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td rowspan="2"width="100%"><a href="index.html"><img
                src="tpl/hibernate2/img/hibernate_logo.gif" width="220" height="63"
                alt="HIBERNATE" border="0"></a></td>
        <td align="right">        
            <a href="http://www.jboss.org/"><IMG
            border="0" src="hib_images/jboss_logo_small_nb.gif" alt="JBoss.org"></a>
        </td>
    </tr>
    <tr>
        <td>
            <table cellpadding="1" cellspacing="0" border="0">
                <tr>
                <td align="right" valign="bottom">
                    
                </td>
                <td valign="bottom" style="font-size:70%; color:#aaaaaa;">&nbsp;|&nbsp;</td>
                <td valign="bottom"  style="font-size: 70%;">
                    <a href="http://forum.hibernate.org/profile.php?mode=register">Register</a>
                </td>
                <td valign="bottom" style="font-size:70%; color:#aaaaaa;">&nbsp;|&nbsp;</td>        
                <td align="right" valign="bottom" width="70">
                    
                </td>
                </tr>
            </table>
        
        </td>
    </tr>
</table>


<table width="100%" bgcolor="#BCAE79" cellspacing="0"
  cellpadding="0" border="0" class="tuborgbox">
  <tr>
    <td width="100%" class="label" height="20">&nbsp;</td>

      
      

      <td>&nbsp;&nbsp;&nbsp;</td>

      

  </tr>
</table>

<table cellpadding="0" cellspacing="0" border="0"><tr><td><img src="tpl/hibernate2/img/0.gif" width="1" height="4" alt="" border="0"></td></tr></table>

</noindex>
<table cellpadding="0" cellspacing="0" border="0">
<tr>
<td>
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="white"
            ><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>
</td>
</tr>
<tr>
    <td bgcolor="#cccccc" valign="top" align="left" class="rappsbox">
    
      <table width="165"  bgcolor="#a0a0a0" cellpadding="0"
cellspacing="0" border="0">
<tr>
    <td>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="1.html"
            class="label"><span class="label">News</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="4.html"
            class="label"><span class="label">About</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="21.html"
            class="label"><span class="label">Feature List</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="200.html"
            class="label"><span class="label">Road Map</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="5.html"
            class="label"><span class="label">Documentation</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="27.html"
            class="label"><span class="label">Related Projects</span></a>&nbsp;</td>
        </tr>
      </table>

    

      

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td>&nbsp;&nbsp;</td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="78.html"
            class="label"><span class="label">External Documentation</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="6.html"
            class="label"><span class="label">Download</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="20.html"
            class="label"><span class="label">Forum &amp; Mailinglists</span></a>&nbsp;</td>
        </tr>
      </table>

    

      
          <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
            </tr>
            <tr>
              <td bgcolor="#ffffff"
                ><img src="tpl/hibernate2/img/0.gif"
                width="1" height="1" alt="" border="0"></td>
             </tr>
          </table>

      <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
          <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
          <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="148.html"
            class="label"><span class="label">Support &amp; Training</span></a>&nbsp;</td>
        </tr>
      </table>

    

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="white"
            ><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    <!-- JIRA fixed position -->
    <table cellpadding="0" cellspacing="0" border="0" bgcolor="#a0a0a0">
        <tr>
        <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
        <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#a0a0a0')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="217.html"
            class="label"><span class="label">JIRA Issue Tracking</span></a></td>
        </tr>
    </table>

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="#FFFFFF"><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    <!-- WIKI  -->
    <table cellpadding="0" cellspacing="0" border="0" bgcolor="#BCAE79">
        <tr>
        <td></td>
          <td><img src="tpl/hibernate2/img/0.gif" hspace="7" vspace="0" width="1" height="1" alt="" border="0"></td>
        <td height="20"
            onmouseover="moverOnParentName(this, 'TR', '#59666C')"
            onmouseout="moutOnParentName(this, 'TR', '#BCAE79')"
            onmouseup="fireClickEventOnChild(this, 'A')"
            nowrap width="100%"><a onfocus="if (this.blur) this.blur()"
            href="37.html"
            class="label" bgcolor="#BCAE79"><span class="label">Wiki Community Area</label></a></td>
        </tr>
    </table>

    <!-- Separator -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
        <td bgcolor="#FFFFFF"><img src="tpl/hibernate2/img/0.gif"
            width="1" height="2" alt="" border="0"></td>
        </tr>
    </table>

    </td>
</tr></table>

<br/>

<br/>
<div align="center">
<a href="175.html"><img
src="hib_images/hibernate_banner02g_125.gif" width="117" height="125"
alt="Hibernate Public Training Courses" border="0"/></a>
</div>

<br/>

<br/>
<div align="center">
<a href="http://www.manning.com/bauer"><img
src="hib_images/hia_banner01.gif" width="124" height="135"
alt="Get Hibernate in Action eBook!" border="0" /></a>
</div>

<br/>
<br/>
<div align="center">
<img src="hib_images/jw_finalist2003.png" border=0" alt="JavaWorld 2003 Finalist">
</div>

<br/>
<br/>
<div align="center">
<img src="hib_images/jolt_winner.png" border=0" alt="Jolt Award 2004 Winner">
</div>

          
    </td>
    <td valign="top" width="100%">
    
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
      <tr>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td rowspan="2" width="100%" valign="top">

        <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr height="10">
            <td width="100%">
                <table cellpadding="0" cellspacing="0" border="0">
  <tr>
    <td>
      

        
        <a href="5.html" class="breadcrumb"><b>Documentation</b></a>&nbsp;<tt>&gt;</tt>

      

        
        <a href="36.html" class="breadcrumb"><b>Community Area</b></a>&nbsp;<tt>&gt;</tt>

      

      <span class="breadcrumb">Data Access with the Spring Framework</span>
    </td>
  </tr>
</table>

            </td>
            </tr>
            <tr>
            <td>
                <hr width="100%">
    
                
    
                
<a name="A1"></a><h1>Data Access with the Spring Framework</h1><p>(featuring Hibernate examples)</p><p>Juergen Hoeller</p><p>July 2003</p>
<a name="A2"></a><h2>0. Preface: Spring Benefits for Hibernate Users</h2><p>Spring's lightweight bean container offers IoC-style wiring up of business objects, DAOs, and resources like JDBC DataSources and Hibernate SessionFactories. Such an XML-defined application context is a powerful alternative to manually managed singletons or factories that parse their configuration from custom properties files. As non-intrusiveness is a central goal, such Spring-configured application beans do not need to depend on Spring interfaces or classes but get configured via their bean properties. This concept can be applied in any environment, be it a J2EE web app, a desktop app, or even an applet.</p><p>In the context of Hibernate, Spring's generic transaction management for DAOs is of particular interest. The goal is to separate data access and transaction demarcation aspects to allow for reusable transactional business objects that are not tied to any specific data access or transaction strategy. Demarcation can either happen programmatically via TransactionTemplate, or declaratively via the AOP TransactionInterceptor. Both native Hibernate / JDBC transactions and JTA are supported as strategies out-of-the-box. This is a viable alternative to local Stateless Session Beans.</p><p>Spring's HibernateTemplate offers a simple way to implement Hibernate-based DAOs without caring about handling Session instances or participating in transactions. No need for try-catch blocks, no need for transaction checks. A simple Hibernate access method can be a one-liner! Combining heterogeneous DAOs works seamlessly, both in terms of DAO interfaces and participating in transactions. For example, certain DAOs can be implemented on plain JDBC, preferably via Spring's JdbcTemplate to avoid manual exception handling.</p><p>You can use a lot of Spring's features respectively classes in a library style, as everything is designed as a set of reusable JavaBeans. Don't be discouraged by the fact that Spring can serve as full application framework too! The application context concept is an additional benefit, not a requirement for using other Spring features. In any case, you're invited to review and leverage the Spring approach, no matter to what extent, before deciding to take the effort and risk of building such infrastructure in-house.</p>
<a name="A3"></a><h2>1. Introduction: Resource Management</h2><p>Typical business applications are often cluttered with repetitive resource management code. Many projects try to invent own solutions for this issue, sometimes sacrificing proper handling of failures for programming convenience. Spring advocates strikingly simple solutions for proper resource handling: Inversion of control via templating, i.e. infrastructure classes with callback interfaces, or applying AOP interceptors. The infrastructure cares for proper resource handling, and for appropriate conversion of specific API exceptions to an unchecked infrastructure exception hierarchy.</p><p>Spring introduces a DAO exception hierarchy, applicable to any data access strategy. For direct JDBC, the JdbcTemplate class cares for connection handling, and for proper conversion of SQLException to the DataAccessException hierarchy, including translation of database-specific SQL error codes to meaningful exception classes. It supports both JTA and JDBC transactions, via respective Spring transaction managers. Spring also offers Hibernate and JDO support, consisting of a HibernateTemplate / JdoTemplate analogous to JdbcTemplate, a HibernateInterceptor / JdoInterceptor, and a Hibernate / JDO transaction manager.</p><p>The major goal is to allow for clear application layering, with any data access and transaction technology, and for loose coupling of application objects. No more business object dependencies on the data access or transaction strategy, no more hard-coded resource lookups, no more hard-to-replace singletons, no more custom service registries. One simple and consistent approach to wiring up application objects, keeping them as reusable and free from container dependencies as possible.</p><p>All the individual data access features are usable on their own but integrate nicely with Spring's application context concept, providing XML-based configuration and cross-referencing of plain JavaBean instances that don't need to be Spring-aware. In a typical Spring app, many important objects are JavaBeans: data access templates, data access objects (that use the templates), transaction managers, business objects (that use the data access objects and transaction managers), web view resolvers, web controllers (that use the business objects), etc.</p>
<a name="A4"></a><h2>2. Resource Definitions in an Application Context</h2><p>To avoid tying application objects to hard-coded resource lookups, Spring allows to define resources like a JDBC DataSource or a Hibernate SessionFactory as beans in an application context. Application objects that need to access resources just receive references to such pre-defined instances via bean references (the DAO definition in the next section illustrates this). The following excerpt from an XML application context definition shows how to set up a JDBC DataSource and a Hibernate SessionFactory on top of it:</p>
<pre class="code">
&lt;bean id=&quot;myDataSource&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;
  &lt;property name=&quot;jndiName&quot;&gt;
    &lt;value&gt;jdbc/myds&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;mySessionFactory&quot; class=&quot;org.springframework.orm.hibernate.LocalSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;mappingResources&quot;&gt;
    &lt;list&gt;
      &lt;value&gt;product.hbm.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  &lt;property name=&quot;hibernateProperties&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;hibernate.dialect&quot;&gt;net.sf.hibernate.dialect.MySQLDialect&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
  &lt;property name=&quot;dataSource&quot;&gt;
    &lt;ref bean=&quot;myDataSource&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

...
</pre><p>Note that switching from a JNDI-located DataSource to a locally defined one like a Jakarta Commons DBCP BasicDataSource is just a matter of configuration:</p>
<pre class="code">
&lt;bean id=&quot;myDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;
  &lt;property name=&quot;driverClassName&quot;&gt;
    &lt;value&gt;org.hsqldb.jdbcDriver&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name=&quot;url&quot;&gt;
    &lt;value&gt;jdbc:hsqldb:hsql://localhost:9001&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name=&quot;username&quot;&gt;
    &lt;value&gt;sa&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name=&quot;password&quot;&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</pre><p>You can also use a JNDI-located SessionFactory, but that's typically not necessary outside an EJB context (see the &quot;container resources vs local resources&quot; section for a discussion).</p>
<a name="A5"></a><h2>3. Inversion of Control: Template and Callback</h2><p>The basic programming model for templating looks as follows, for methods that can be part of any custom data access object or business object. There are no restrictions on the implementation of the surrounding object at all, it just needs to provide a Hibernate SessionFactory. It can get the latter from anywhere, but preferably as bean reference from a Spring application context - via a simple setSessionFactory bean property setter. The following snippets show a DAO definition in a Spring application context, referencing the above defined SessionFactory, and an example for a DAO method implementation.</p>
<pre class="code">
&lt;bean id=&quot;myProductDao&quot; class=&quot;product.ProductDaoImpl&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

...
</pre>
<pre class="code">
public class ProductDaoImpl implements ProductDao {

  private SessionFactory sessionFactory;

  public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
  }

  public List loadProductsByCategory(final String category) {
    HibernateTemplate hibernateTemplate = new HibernateTemplate(this.sessionFactory);
    return (List) hibernateTemplate.execute(
        new HibernateCallback() {
          public Object doInHibernate(Session session) throws HibernateException {
            List result = session.find(&quot;from test.Product product where product.category=?&quot;, category, Hibernate.STRING);
            // do some further stuff with the result list
            return result;
          }
        });
  }
}
</pre><p>A callback implementation can effectively be used for any Hibernate data access. HibernateTemplate will care for proper Session opening and closing in any case, and for automatically participating in transactions. The template instances are thread-safe and reusable, they can thus be kept as instance variables of the surrounding class.</p><p>For simple single step actions like a single find, load, saveOrUpdate, or delete call, HibernateTemplate offers alternative convenience methods that can replace such one line callback implementations. Furthermore, Spring provides a convenient HibernateDaoSupport base class that provides a setSessionFactory method for receiving a SessionFactory, and getSessionFactory and getHibernateTemplate for use by subclasses. In combination, this allows for very simple DAO implementations for typical requirements:</p>
<pre class="code">
public class ProductDaoImpl extends HibernateDaoSupport implements ProductDao {

  public List loadProductsByCategory(String category) {
    return getHibernateTemplate().find(&quot;from test.Product product where product.category=?&quot;, category);
  }
}
</pre>
<a name="A6"></a><h2>4. Applying an AOP Interceptor Instead of a Template</h2><p>An alternative to using a HibernateTemplate is Spring's AOP HibernateInterceptor, replacing the callback implementation with straight Hibernate code within a delegating try/catch block, and a respective interceptor configuration in the application context. The following snippets show respective DAO, interceptor, and proxy definitions in a Spring application context, and an example for a DAO method implementation.</p>
<pre class="code">
...

&lt;bean id=&quot;myHibernateInterceptor&quot; class=&quot;org.springframework.orm.hibernate.HibernateInterceptor&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductDaoTarget&quot; class=&quot;product.ProductDaoImpl&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductDao&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
  &lt;property name=&quot;proxyInterfaces&quot;&gt;
    &lt;value&gt;product.ProductDao&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name=&quot;interceptorNames&quot;&gt;
    &lt;list&gt;
      &lt;value&gt;myHibernateInterceptor&lt;/value&gt;
      &lt;value&gt;myProductDaoTarget&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
&lt;/bean&gt;

...
</pre>
<pre class="code">
public class ProductDaoImpl extends HibernateDaoSupport implements ProductDao {

  public List loadProductsByCategory(final String category) throws MyException {
    Session session = SessionFactoryUtils.getSession(getSessionFactory(), false);
    try {
      List result = session.find(&quot;from test.Product product where product.category=?&quot;,
category, Hibernate.STRING);
      if (result == null) {
        throw new MyException(&quot;invalid search result&quot;);
      }
      return result;
    }
    catch (HibernateException ex) {
      throw SessionFactoryUtils.convertHibernateAccessException(ex);
    }
  }
}
</pre><p>This method will only work with a HibernateInterceptor for it, caring for opening a thread-bound Session before and closing it after the method call. The &quot;false&quot; flag on getSession makes sure that the Session must already exist; else SessionFactoryUtils would create a new one if none found. If there is already a SessionHolder bound to the thread, e.g. by a HibernateTransactionManager transaction, SessionFactoryUtils automatically takes part in it in any case. HibernateTemplate uses SessionFactoryUtils underneath - it's all the same infrastructure.</p><p>The major advantage of HibernateInterceptor is that it allows any checked application exception to be thrown within the data access code, while HibernateTemplate is restricted to unchecked exceptions within the callback. Note that one can offen defer the respective checks and throwing of application exceptions to after the callback, though. The interceptor's major drawback is that it requires special setup in the context. HibernateTemplate's convenience methods offers simpler means for many scenarios.</p>
<a name="A7"></a><h2>5. Programmatic Transaction Demarcation</h2><p>On top of such lower-level data access services, transactions can be demarcated in a higher level of the application, spanning any number of operations. There are no restrictions on the implementation of the surrounding business object here too, it just needs a Spring PlatformTransactionManager. Again, the latter can come from anywhere, but preferably as bean reference via a setTransactionManager method - just like the productDAO should be set via a setProductDao method. The following snippets show a transaction manager and a business object definition in a Spring application context, and an example for a business method implementation.</p>
<pre class="code">
...

&lt;bean id=&quot;myTransactionManager&quot; class=&quot;org.springframework.orm.hibernate.HibernateTransactionManager&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductService&quot; class=&quot;product.ProductServiceImpl&quot;&gt;
  &lt;property name=&quot;transactionManager&quot;&gt;
    &lt;ref bean=&quot;myTransactionManager&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;productDao&quot;&gt;
    &lt;ref bean=&quot;myProductDao&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</pre>
<pre class="code">
public class ProductServiceImpl implements ProductService {

  private PlatformTransactionManager transactionManager;
  private ProductDao productDao;

  public void setTransactionManager(PlatformTransactionManager transactionManager) {
    this.transactionManager = transactionManager;
  }

  public void setProductDao(ProductDao productDao) {
    this.productDao = productDao;
  }

  public void increasePriceOfAllProductsInCategory(final String category) {
    TransactionTemplate transactionTemplate = new TransactionTemplate(this.transactionManager);
    transactionTemplate.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);
    transactionTemplate.execute(new TransactionCallbackWithoutResult() {
      public void doInTransactionWithoutResult(TransactionStatus status) {
        List productsToChange = productDAO.loadProductsByCategory(category);
        ...
      }
    });
  }
}
</pre>
<a name="A8"></a><h2>6. Declarative Transaction Demarcation</h2><p>Alternatively, one can use Spring's AOP TransactionInterceptor, replacing the transaction demarcation code with an interceptor configuration in the application context. This allows to keep business objects free from repetitive transaction demarcation code in each business method. Furthermore, transaction semantics like propagation behavior and isolation level can be changed in a configuration file and do not affect the business object implementations.</p>
<pre class="code">
...

&lt;bean id=&quot;myTransactionManager&quot; class=&quot;org.springframework.orm.hibernate.HibernateTransactionManager&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myTransactionInterceptor&quot; class=&quot;org.springframework.transaction.interceptor.TransactionInterceptor&quot;&gt;
  &lt;property name=&quot;transactionManager&quot;&gt;
    &lt;ref bean=&quot;myTransactionManager&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;transactionAttributeSource&quot;&gt;
    &lt;value&gt;
      product.ProductService.increasePrice*=PROPAGATION_REQUIRED
      product.ProductService.someOtherBusinessMethod=PROPAGATION_MANDATORY
   &lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductServiceTarget&quot; class=&quot;product.ProductServiceImpl&quot;&gt;
  &lt;property name=&quot;productDao&quot;&gt;
    &lt;ref bean=&quot;myProductDao&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductService&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;
  &lt;property name=&quot;proxyInterfaces&quot;&gt;
    &lt;value&gt;product.ProductService&lt;/value&gt;
  &lt;/property&gt;
  &lt;property name=&quot;interceptorNames&quot;&gt;
    &lt;value&gt;myTransactionInterceptor,myProductServiceTarget&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</pre>
<pre class="code">
public class ProductServiceImpl implements ProductService {

  private ProductDao productDao;

  public void setProductDao(ProductDao productDao) {
    this.productDao = productDao;
  }

  public void increasePriceOfAllProductsInCategory(final String category) {
    List productsToChange = this.productDAO.loadProductsByCategory(category);
    ...
  }
}
</pre><p>Like with HibernateInterceptor, TransactionInterceptor allows any checked application exception to be thrown with the callback code, while TransactionTemplate is restricted to unchecked exceptions within the callback. TransactionTemplate will trigger a rollback in case of an unchecked application exception, or if the transaction has been marked rollback-only by the application (via TransactionStatus). TransactionInterceptor behaves the same way by default but allows configurable rollback policies per method.</p><p>A convenient alternative way of setting up declarative transactions is TransactionProxyFactoryBean, particularly if there are no other AOP interceptors involved. TransactionProxyFactoryBean combines the proxy definition itself with transaction configuration for a particular target bean. This reduces the configuration effort to one target bean plus one proxy bean. Furthermore, you do not need to specify which interfaces or classes the transactional methods are defined in.</p>
<pre class="code">
...

&lt;bean id=&quot;myTransactionManager&quot; class=&quot;org.springframework.orm.hibernate.HibernateTransactionManager&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductServiceTarget&quot; class=&quot;product.ProductServiceImpl&quot;&gt;
  &lt;property name=&quot;productDao&quot;&gt;
    &lt;ref bean=&quot;myProductDao&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductService&quot; class=&quot;org.springframework.transaction.interceptor.TransactionProxyFactoryBean&quot;&gt;
  &lt;property name=&quot;transactionManager&quot;&gt;
    &lt;ref bean=&quot;myTransactionManager&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;target&quot;&gt;
    &lt;ref bean=&quot;myProductServiceTarget&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;transactionAttributes&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;increasePrice*&quot;&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
      &lt;prop key=&quot;someOtherBusinessMethod&quot;&gt;PROPAGATION_MANDATORY&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</pre>
<a name="A9"></a><h2>7. Transaction Management Strategies</h2><p>Both TransactionTemplate and TransactionInterceptor delegate the actual transaction handling to a PlatformTransactionManager instance, which can be a HibernateTransactionManager (for a single Hibernate SessionFactory, using a ThreadLocal Session under the hood) or a JtaTransactionManager (delegating to the JTA subsystem of the container) for Hibernate applications. You could even use a custom PlatformTransactionManager implementation.</p><p>So switching from native Hibernate transaction management to JTA, i.e. when facing distributed transaction requirements for certain deployments of your application, is just a matter of configuration. Simply replace the Hibernate transaction manager with Spring's JTA transaction implementation. Both transaction demarcation and data access code will work without changes, as they just use the generic transaction management APIs.</p><p>For distributed transactions across multiple Hibernate session factories, simply combine JtaTransactionManager as transaction strategy with multiple LocalSessionFactoryBean definitions. Each of your DAOs then gets one specific SessionFactory reference passed into its respective bean property. If all underlying JDBC data sources are transactional container ones, a business object can demarcate transactions across any number of DAOs and any number of session factories without special regard, as long as using JtaTransactionManager as strategy.</p>
<pre class="code">
&lt;bean id=&quot;myDataSource1&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;
  &lt;property name=&quot;jndiName&quot;&gt;
    &lt;value&gt;jdbc/myds1&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myDataSource2&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;
  &lt;property name=&quot;jndiName&quot;&gt;
    &lt;value&gt;jdbc/myds2&lt;/value&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;mySessionFactory1&quot; class=&quot;org.springframework.orm.hibernate.LocalSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;mappingResources&quot;&gt;
    &lt;list&gt;
      &lt;value&gt;product.hbm.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  &lt;property name=&quot;hibernateProperties&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;hibernate.dialect&quot;&gt;net.sf.hibernate.dialect.MySQLDialect&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
  &lt;property name=&quot;dataSource&quot;&gt;
    &lt;ref bean=&quot;myDataSource1&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;mySessionFactory2&quot; class=&quot;org.springframework.orm.hibernate.LocalSessionFactoryBean&quot;&gt;
  &lt;property name=&quot;mappingResources&quot;&gt;
    &lt;list&gt;
      &lt;value&gt;inventory.hbm.xml&lt;/value&gt;
    &lt;/list&gt;
  &lt;/property&gt;
  &lt;property name=&quot;hibernateProperties&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;hibernate.dialect&quot;&gt;net.sf.hibernate.dialect.OracleDialect&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
  &lt;property name=&quot;dataSource&quot;&gt;
    &lt;ref bean=&quot;myDataSource2&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myTransactionManager&quot; class=&quot;org.springframework.transaction.jta.JtaTransactionManager&quot;/&gt;

&lt;bean id=&quot;myProductDao&quot; class=&quot;product.ProductDaoImpl&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory1&quot;/&gt;
   &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myInventoryDao&quot; class=&quot;product.InventoryDaoImpl&quot;&gt;
  &lt;property name=&quot;sessionFactory&quot;&gt;
    &lt;ref bean=&quot;mySessionFactory2&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductServiceTarget&quot; class=&quot;product.ProductServiceImpl&quot;&gt;
  &lt;property name=&quot;productDao&quot;&gt;
    &lt;ref bean=&quot;myProductDao&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;inventoryDao&quot;&gt;
    &lt;ref bean=&quot;myInventoryDao&quot;/&gt;
   &lt;/property&gt;
&lt;/bean&gt;

&lt;bean id=&quot;myProductService&quot; class=&quot;org.springframework.transaction.interceptor.TransactionProxyFactoryBean&quot;&gt;
  &lt;property name=&quot;transactionManager&quot;&gt;
    &lt;ref bean=&quot;myTransactionManager&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;target&quot;&gt;
    &lt;ref bean=&quot;myProductServiceTarget&quot;/&gt;
  &lt;/property&gt;
  &lt;property name=&quot;transactionAttributes&quot;&gt;
    &lt;props&gt;
      &lt;prop key=&quot;increasePrice*&quot;&gt;PROPAGATION_REQUIRED&lt;/prop&gt;
      &lt;prop key=&quot;someOtherBusinessMethod&quot;&gt;PROPAGATION_MANDATORY&lt;/prop&gt;
    &lt;/props&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</pre><p>Both HibernateTransactionManager and JtaTransactionManager allow for proper JVM-level cache handling with Hibernate - without container-specific transaction manager lookup or JCA connector (as long as not using EJB to initiate transactions). Additionally, HibernateTransactionManager can export the JDBC Connection used by Hibernate to plain JDBC access code. This allows for high level transaction demarcation with mixed Hibernate/JDBC data access completely without JTA, as long as just accessing one database!</p>
<a name="A10"></a><h2>8. Using Spring-managed Application Beans</h2><p>A Spring application context definition can be loaded with a variety of context implementations, from FileSystemXmlApplicationContext and ClassPathXmlApplicationContext to XmlWebApplicationContext. This allows for reuse of Spring-managed data access and business objects in all kinds of environments. By default, a web app will have its root context defined in &quot;WEB-INF/applicationContext.xml&quot;.</p><p>In any Spring app, an application context defined in an XML file wires up all the application beans that are involved, from the Hibernate session factory to custom data access and business objects (like the beans above). Most of them do not have to be aware of being managed by the Spring container, not even when collaborating with other beans, as they simply follow JavaBeans conventions. A bean property can either represent a value parameter or a collaborating bean. The following bean definition could be part of a Spring web MVC context that accesses business beans in a root application context.</p>
<pre class="code">
&lt;bean id=&quot;myProductList&quot; class=&quot;product.ProductListController&quot;&gt;
  &lt;property name=&quot;productService&quot;&gt;
    &lt;ref bean=&quot;myProductService&quot;/&gt;
  &lt;/property&gt;
&lt;/bean&gt;
</pre><p>Spring web controllers are provided with all business or data access objects they need via bean references, so there typically isn't any need to do manual bean lookups in the application context. But when using Spring-managed beans with Struts, or within an EJB implementation or even an applet, one is always able to look up a bean manually. Therefore, Spring beans can be leveraged virtually anywhere. One just needs a reference to the application context, be it via a servlet context attribute in the web case, or a manually created instance from a file or class path resource.</p>
<pre class="code">
ApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(servletContext);
ProductService productService = (ProductService) context.getBean(&quot;myProductService&quot;);
</pre>
<pre class="code">
ApplicationContext context = new FileSystemXmlApplicationContext(&quot;C:/myContext.xml&quot;);
ProductService productService = (ProductService) context.getBean(&quot;myProductService&quot;);
</pre>
<pre class="code">
ApplicationContext context = new ClassPathXmlApplicationContext(&quot;myContext.xml&quot;);
ProductService productService = (ProductService) context.getBean(&quot;myProductService&quot;);
</pre>
<a name="A11"></a><h2>9. Container Resources versus Local Resources</h2><p>Spring's resource management allows for simple switching between a JNDI SessionFactory and a local one, same for a JNDI DataSource, without having to change a single line of application code. Whether to keep the resource definitions in the container or locally within the application, is mainly a matter of the transaction strategy being used. Compared to a Spring-defined local SessionFactory, a manually registered JNDI SessionFactory does not provide any benefits. If registered via Hibernate's JCA connector, there is the added value of transparently taking part in JTA transactions, especially within EJBs.</p><p>An important benefit of Spring's transaction support is that it isn't bound to a container at all. Configured to any other strategy than JTA, it will work in a standalone or test environment too. Especially for the typical case of single-database transactions, this is a very lightweight and powerful alternative to JTA. When using local EJB Stateless Session Beans to drive transactions, you depend both on an EJB container and JTA - even if you just access a single database anyway, and just use SLSBs for declarative transactions via CMT. The alternative of using JTA programmatically requires a J2EE environment too.</p><p>JTA does not just involve container dependencies in terms of JTA itself and of JNDI DataSources. For non-Spring JTA-driven Hibernate transactions, you have to use the Hibernate JCA connector, or extra Hibernate transaction code with JTATransaction being configured, for proper JVM-level caching. Spring-driven transactions can work with a locally defined Hibernate SessionFactory nicely, just like with a local JDBC DataSource - if accessing a single database, of course. Therefore you just have to fall back to Spring's JTA transaction strategy when actually facing distributed transaction requirements.</p><p>Note that a JCA connector needs container-specific deployment steps, and obviously JCA support in the first place. This is far more hassle than deploying a simple web app with local resource definitions and Spring-driven transactions. And you often need the Enterprise Edition of your container, as e.g. WebLogic Express does not provide JCA. A Spring app with local resources and transactions spanning one single database will work in any J2EE web container (without JTA, JCA, or EJB) - like Tomcat, Resin, or even plain Jetty. Additionally, such a middle tier can be reused in desktop applications or test suites easily.</p><p>All things considered: If you do not use EJB, stick with local SessionFactory setup and Spring's HibernateTransactionManager or JtaTransactionManager. You will get all benefits including proper transactional JVM-level caching and distributed transactions, without any container deployment hassle. JNDI registration of a Hibernate SessionFactory via the JCA connector only adds value for use within EJBs.</p>
<a name="A12"></a><h2>10. Skeletons and Samples</h2><p>For a commented and detailed sample configuration of a J2EE web app with Spring and Hibernate, have a look at the &quot;webapp-typical&quot; skeleton, included in the Spring Framework distribution. It outlines various data source and transaction manager configuration options that are suitable for JDBC and Hibernate apps. It also shows how to configure AOP interceptors, focusing on the transaction interceptor.</p><p>As of release 1.0 M2, the Petclinic sample in the Spring distribution offers alternative DAO implementations and application context configurations for JDBC and Hibernate. Petclinic can therefore serve as working sample app that illustrates the use of Hibernate in a Spring web app. It also leverages declarative transaction demarcation with different transaction strategies.</p>
<a name="A13"></a><h2>Links</h2><p><a target="_blank" href="http://www.springframework.org">Spring Framework website</a></p><p><a target="_blank" href="http://www.springframework.org/documentation.html">Spring Framework documentation</a></p>

    
                
            </td>
            </tr>
            <tr>
            <td>
                
            </td>
            </tr>
        </table>

        </td>
        <td rowspan="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      </tr>
      </table>
    
    </td>
</tr>
</table>


<hr>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td align="left">
<A href="http://sourceforge.net/projects/hibernate"><IMG
border="0" src="tpl/hibernate2/img/0.gif" hspace="30" vspace="2"></A>
</td>
<td align="right" valign="middle">
<b><a href="http://www.develnet.org/">coWiki</a>&nbsp;</b>
</td>
</tr>
</table>
</body>
</html>
